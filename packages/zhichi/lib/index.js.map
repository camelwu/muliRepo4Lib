{"version":3,"file":"index.js","sources":["../../utils/lib/index.js","../src/onebyone.ts","../src/smallclass.ts","../src/index.ts"],"sourcesContent":["/*!\n * (c) 2014-2020 FE-Team\n * Released under the Apache License.\n */\n/**\r\n *\r\n * @desc 判断两个数组是否相等\r\n * @param {Array} arr1\r\n * @param {Array} arr2\r\n * @return {Boolean}\r\n */\r\nfunction arrayEqual(arr1, arr2) {\r\n    if (arr1 === arr2)\r\n        return true;\r\n    if (arr1.length !== arr2.length)\r\n        return false;\r\n    for (let i = 0; i < arr1.length; ++i) {\r\n        if (arr1[i] !== arr2[i])\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n *\r\n * @desc 判断元素是否有某个class\r\n * @param {HTMLElement} ele\r\n * @param {String} cls\r\n * @return {Boolean}\r\n */\r\nfunction hasClass(ele, cls) {\r\n    return new RegExp(`(\\\\s|^)${cls}(\\\\s|$)`).test(ele.className);\r\n}\r\n/**\r\n *\r\n * @desc   为元素添加class\r\n * @param  {HTMLElement} ele\r\n * @param  {String} cls\r\n */\r\nfunction addClass(ele, cls) {\r\n    if (!hasClass(ele, cls)) {\r\n        ele.className += ` ${cls}`;\r\n    }\r\n}\r\n/**\r\n *\r\n * @desc 为元素移除class\r\n * @param {HTMLElement} ele\r\n * @param {String} cls\r\n */\r\nfunction removeClass(ele, cls) {\r\n    if (hasClass(ele, cls)) {\r\n        const reg = new RegExp(`(\\\\s|^)${cls}(\\\\s|$)`);\r\n        ele.className = ele.className.replace(reg, \" \");\r\n    }\r\n}\r\n/**\r\n *\r\n * @desc 根据name读取cookie\r\n * @param  {String} name\r\n * @return {String}\r\n */\r\nfunction getCookie(name) {\r\n    const arr = document.cookie.replace(/\\s/g, \"\").split(\";\");\r\n    for (let i = 0; i < arr.length; i++) {\r\n        const tempArr = arr[i].split(\"=\");\r\n        if (tempArr[0] === name) {\r\n            return decodeURIComponent(tempArr[1]);\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\n/**\r\n *\r\n * @desc 根据name删除cookie\r\n * @param  {String} name\r\n */\r\nfunction removeCookie(name) {\r\n    // 设置已过期，系统会立刻删除cookie\r\n    setCookie(name, \"1\", -1);\r\n}\r\n/**\r\n *\r\n * @desc  设置Cookie\r\n * @param {String} name\r\n * @param {String} value\r\n * @param {Number} days\r\n */\r\nfunction setCookie(name, value, days) {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() + days);\r\n    document.cookie = `${name}=${value};expires=${date}`;\r\n}\r\n/**\r\n *\r\n * @desc 获取浏览器类型和版本\r\n * @return {String}\r\n */\r\nfunction getExplore() {\r\n    const sys = {};\r\n    const ua = navigator.userAgent.toLowerCase();\r\n    let s;\r\n    (s = ua.match(/rv:([\\d.]+)\\) like gecko/))\r\n        ? (sys.ie = s[1])\r\n        : (s = ua.match(/msie ([\\d\\.]+)/))\r\n            ? (sys.ie = s[1])\r\n            : (s = ua.match(/edge\\/([\\d\\.]+)/))\r\n                ? (sys.edge = s[1])\r\n                : (s = ua.match(/firefox\\/([\\d\\.]+)/))\r\n                    ? (sys.firefox = s[1])\r\n                    : (s = ua.match(/(?:opera|opr).([\\d\\.]+)/))\r\n                        ? (sys.opera = s[1])\r\n                        : (s = ua.match(/chrome\\/([\\d\\.]+)/))\r\n                            ? (sys.chrome = s[1])\r\n                            : (s = ua.match(/version\\/([\\d\\.]+).*safari/))\r\n                                ? (sys.safari = s[1])\r\n                                : 0;\r\n    // 根据关系进行判断\r\n    if (sys.ie)\r\n        return `IE: ${sys.ie}`;\r\n    if (sys.edge)\r\n        return `EDGE: ${sys.edge}`;\r\n    if (sys.firefox)\r\n        return `Firefox: ${sys.firefox}`;\r\n    if (sys.chrome)\r\n        return `Chrome: ${sys.chrome}`;\r\n    if (sys.opera)\r\n        return `Opera: ${sys.opera}`;\r\n    if (sys.safari)\r\n        return `Safari: ${sys.safari}`;\r\n    return \"Unknown\";\r\n}\r\n/**\r\n *\r\n * @desc 获取操作系统类型\r\n * @return {String}\r\n */\r\nfunction getOS() {\r\n    const userAgent = (\"navigator\" in window &&\r\n        \"userAgent\" in navigator &&\r\n        navigator.userAgent.toLowerCase()) ||\r\n        \"\";\r\n    // let vendor = 'navigator' in window && 'vendor' in navigator && navigator.vendor.toLowerCase() || '';\r\n    const appVersion = (\"navigator\" in window &&\r\n        \"appVersion\" in navigator &&\r\n        navigator.appVersion.toLowerCase()) ||\r\n        \"\";\r\n    if (/iphone/i.test(userAgent) ||\r\n        /ipad/i.test(userAgent) ||\r\n        /ipod/i.test(userAgent))\r\n        return \"ios\";\r\n    if (/android/i.test(userAgent))\r\n        return \"android\";\r\n    if (/win/i.test(appVersion) && /phone/i.test(userAgent))\r\n        return \"windowsPhone\";\r\n    if (/mac/i.test(appVersion))\r\n        return \"MacOSX\";\r\n    if (/win/i.test(appVersion))\r\n        return \"windows\";\r\n    if (/linux/i.test(appVersion))\r\n        return \"linux\";\r\n    return \"Unknown\";\r\n}\r\n/**\r\n * 生成一个UID，保证同一时刻生成的值，不同即可，只能用于单机，\r\n * 不能用来共享，比如：当前生成的ID存到服务器上，会存在重复的风险\r\n */\r\nfunction getUId() {\r\n    const resAry = Array(4);\r\n    const currentTime = new Date().getTime();\r\n    const uidAry = resAry.map(() => {\r\n        // eslint-disable-next-line no-bitwise\r\n        return `${(Math.random() * 16) | 0}`;\r\n    });\r\n    uidAry.push(currentTime.toString(16));\r\n    return uidAry.join(\"\");\r\n}\r\n/**\r\n * 根据当前选择器获取cavase元素\r\n *\r\n * @param {Number} ele\r\n * @return {Object} {x: Num, y: Num}\r\n */\r\nfunction formatPos(mouseX, mouseY) {\r\n    const zoom = window.zoom || 1;\r\n    return { x: mouseX / zoom, y: mouseY / zoom };\r\n}\r\n/**\r\n * 获取当前时间\r\n *\r\n * @return {Number} 时间戳\r\n */\r\nfunction now() {\r\n    if (Date.now) {\r\n        return Date.now();\r\n    }\r\n    return new Date().getTime();\r\n}\r\n/**\r\n * @desc 函数防抖\r\n * 与throttle不同的是，debounce保证一个函数在多少毫秒内不再被触发，只会执行一次，\r\n * 要么在第一次调用return的防抖函数时执行，要么在延迟指定毫秒后调用。\r\n * @example 适用场景：如在线编辑的自动存储防抖。\r\n * @param  {Function} func          延迟毫秒后执行的函数。`this`上下文和所有参数都是按原样传递的，\r\n *                                  执行去抖动功能时，，调用`callback`。\r\n * @param  {Number}   wait          0或者更大的毫秒数。 对于事件回调，大约100或250毫秒（或更高）的延迟是最有用的。\r\n * @param  {Boolean}  immediate     可选，默认为false。\r\n *                                  如果为false或未传入，回调函数则在第一次调用return的防抖函数后延迟指定毫秒调用。\r\n *                                  如果为true，回调函数则在第一次调用return的防抖函数时直接执行\r\n *\r\n * @return {Function} 新的防抖函数。\r\n */\r\nfunction debounce(func, wait, immediate) {\r\n    let timeout;\r\n    return function executedFunction(...args) {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const context = this;\r\n        // eslint-disable-next-line prefer-rest-params\r\n        // const args: any[] = args;\r\n        const later = () => {\r\n            timeout = null;\r\n            if (!immediate)\r\n                func.apply(context, args);\r\n        };\r\n        const callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow)\r\n            func.apply(context, args);\r\n    };\r\n}\r\n/**\r\n *\r\n * @desc 获取元素\r\n * @param {string | HTMLElement} ele\r\n * @return {HTMLElement}\r\n * getEle(ele: any): Element;\r\n * getEle(ele: string): HTMLElement;\r\n * getEle(ele: \"canvas\"): HTMLCanvasElement;\r\n */\r\nfunction getEle(ele) {\r\n    if (typeof ele === \"string\") {\r\n        return document.querySelector(ele);\r\n    }\r\n    return ele;\r\n}\r\n/**\r\n *\r\n * @desc 获取滚动条距顶部的距离\r\n * @return {Number}\r\n */\r\nfunction getScrollTop() {\r\n    return ((document.documentElement && document.documentElement.scrollTop) ||\r\n        document.body.scrollTop);\r\n}\r\n/**\r\n *\r\n * @desc  获取一个元素的距离文档(document)的位置，类似jQ中的offset()\r\n * @param {HTMLElement} ele\r\n * @returns { {left: number, top: number} }\r\n */\r\nfunction offset(ele) {\r\n    const pos = {\r\n        left: 0,\r\n        top: 0\r\n    };\r\n    // 递归冒泡\r\n    while (ele) {\r\n        pos.left += ele.offsetLeft;\r\n        pos.top += ele.offsetTop;\r\n        // @ts-ignore\r\n        ele = ele.offsetParent;\r\n    }\r\n    return pos;\r\n}\r\nvar requestAnimFrame = (function () {\r\n    // window.mozRequestAnimationFrame ||#ff低版本\r\n    return (window.requestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        function (callback) {\r\n            window.setTimeout(callback, 1000 / 60);\r\n        });\r\n})();\r\n/**\r\n *\r\n * @desc 设置滚动条距顶部的距离\r\n * @param {Number} value\r\n */\r\nfunction setScrollTop(value) {\r\n    window.scrollTo(0, value);\r\n    // return value;\r\n}\r\n/**\r\n *\r\n * @desc  在${duration}时间内，滚动条平滑滚动到${to}指定位置\r\n * @param {Number} to\r\n * @param {Number} duration\r\n */\r\nfunction scrollTo(to, duration) {\r\n    if (duration < 0) {\r\n        setScrollTop(to);\r\n        return;\r\n    }\r\n    const diff = to - getScrollTop();\r\n    if (diff === 0)\r\n        return;\r\n    const step = (diff / duration) * 10;\r\n    requestAnimFrame(function () {\r\n        if (Math.abs(step) > Math.abs(diff)) {\r\n            setScrollTop(getScrollTop() + diff);\r\n            return;\r\n        }\r\n        setScrollTop(getScrollTop() + step);\r\n        if ((diff > 0 && getScrollTop() >= to) ||\r\n            (diff < 0 && getScrollTop() <= to)) {\r\n            return;\r\n        }\r\n        scrollTo(to, duration - 16);\r\n    });\r\n}\r\n/**\r\n *\r\n * @desc H5软键盘缩回、弹起回调\r\n * 当软件键盘弹起会改变当前 window.innerHeight，监听这个值变化\r\n * @param {Function} downCb 当软键盘弹起后，缩回的回调\r\n * @param {Function} upCb 当软键盘弹起的回调\r\n */\r\nfunction windowResize(downCb, upCb) {\r\n    const clientHeight = window.innerHeight;\r\n    downCb = typeof downCb === \"function\" ? downCb : function () { };\r\n    upCb = typeof upCb === \"function\" ? upCb : function () { };\r\n    window.addEventListener(\"resize\", () => {\r\n        const height = window.innerHeight;\r\n        if (height === clientHeight) {\r\n            downCb();\r\n        }\r\n        if (height < clientHeight) {\r\n            upCb();\r\n        }\r\n    });\r\n}\r\n/**\r\n * @desc   函数节流。\r\n * 适用于限制`resize`和`scroll`等函数的调用频率\r\n *\r\n * @param  {Function}  func           延迟毫秒后执行的函数。`this`上下文和所有参数都是按原样传递的，\r\n *                                    执行去节流功能时，调用`callback`。\r\n * @param  {Number}    wait           0 或者更大的毫秒数。 对于事件回调，大约100或250毫秒（或更高）的延迟是最有用的。\r\n * @param  {Object}    options        可选，默认为false。\r\n *                                    如果noTrailing为true，当节流函数被调用，每过`delay`毫秒`callback`也将执行一次。\r\n *                                    如果noTrailing为false或者未传入，`callback`将在最后一次调用节流函数后再执行一次.\r\n *                                    （延迟`delay`毫秒之后，节流函数没有被调用,内部计数器会复位）\r\n *\r\n * @return {Function}  新的节流函数\r\n */\r\nfunction throttle(func, wait, options) {\r\n    let timeout;\r\n    let context;\r\n    let args;\r\n    let result;\r\n    let previous = 0;\r\n    // eslint-disable-next-line no-param-reassign\r\n    if (!options)\r\n        options = {};\r\n    const later = () => {\r\n        previous = options.leading === false ? 0 : now();\r\n        timeout = null;\r\n        result = func.apply(context, args);\r\n        if (!timeout) {\r\n            context = null;\r\n            args = null;\r\n        }\r\n    };\r\n    const throttled = (...targs) => {\r\n        // let now = Date.now()||new Date().getTime();\r\n        const tnow = now();\r\n        if (!previous && options.leading === false)\r\n            previous = tnow;\r\n        const remaining = wait - (tnow - previous);\r\n        // @ts-ignore\r\n        context = this;\r\n        // eslint-disable-next-line prefer-rest-params\r\n        args = targs;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = tnow;\r\n            result = func.apply(context, args);\r\n            if (!timeout) {\r\n                context = null;\r\n                args = null;\r\n            }\r\n        }\r\n        else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(later, remaining);\r\n        }\r\n        return result;\r\n    };\r\n    throttled.cancel = () => {\r\n        clearTimeout(timeout);\r\n        previous = 0;\r\n        timeout = null;\r\n        context = null;\r\n        args = null;\r\n    };\r\n    return throttled;\r\n}\r\n/**\r\n * @desc 根据keycode获得键名\r\n * @param  {Number} keycode\r\n * @return {String}\r\n */\r\nfunction getKeyName(keycode) {\r\n    const keyCodeMap = {\r\n        8: \"Backspace\",\r\n        9: \"Tab\",\r\n        13: \"Enter\",\r\n        16: \"Shift\",\r\n        17: \"Ctrl\",\r\n        18: \"Alt\",\r\n        19: \"Pause\",\r\n        20: \"Caps Lock\",\r\n        27: \"Escape\",\r\n        32: \"Space\",\r\n        33: \"Page Up\",\r\n        34: \"Page Down\",\r\n        35: \"End\",\r\n        36: \"Home\",\r\n        37: \"Left\",\r\n        38: \"Up\",\r\n        39: \"Right\",\r\n        40: \"Down\",\r\n        42: \"Print Screen\",\r\n        45: \"Insert\",\r\n        46: \"Delete\",\r\n        48: \"0\",\r\n        49: \"1\",\r\n        50: \"2\",\r\n        51: \"3\",\r\n        52: \"4\",\r\n        53: \"5\",\r\n        54: \"6\",\r\n        55: \"7\",\r\n        56: \"8\",\r\n        57: \"9\",\r\n        65: \"A\",\r\n        66: \"B\",\r\n        67: \"C\",\r\n        68: \"D\",\r\n        69: \"E\",\r\n        70: \"F\",\r\n        71: \"G\",\r\n        72: \"H\",\r\n        73: \"I\",\r\n        74: \"J\",\r\n        75: \"K\",\r\n        76: \"L\",\r\n        77: \"M\",\r\n        78: \"N\",\r\n        79: \"O\",\r\n        80: \"P\",\r\n        81: \"Q\",\r\n        82: \"R\",\r\n        83: \"S\",\r\n        84: \"T\",\r\n        85: \"U\",\r\n        86: \"V\",\r\n        87: \"W\",\r\n        88: \"X\",\r\n        89: \"Y\",\r\n        90: \"Z\",\r\n        91: \"Windows\",\r\n        93: \"Right Click\",\r\n        96: \"Numpad 0\",\r\n        97: \"Numpad 1\",\r\n        98: \"Numpad 2\",\r\n        99: \"Numpad 3\",\r\n        100: \"Numpad 4\",\r\n        101: \"Numpad 5\",\r\n        102: \"Numpad 6\",\r\n        103: \"Numpad 7\",\r\n        104: \"Numpad 8\",\r\n        105: \"Numpad 9\",\r\n        106: \"Numpad *\",\r\n        107: \"Numpad +\",\r\n        109: \"Numpad -\",\r\n        110: \"Numpad .\",\r\n        111: \"Numpad /\",\r\n        112: \"F1\",\r\n        113: \"F2\",\r\n        114: \"F3\",\r\n        115: \"F4\",\r\n        116: \"F5\",\r\n        117: \"F6\",\r\n        118: \"F7\",\r\n        119: \"F8\",\r\n        120: \"F9\",\r\n        121: \"F10\",\r\n        122: \"F11\",\r\n        123: \"F12\",\r\n        144: \"Num Lock\",\r\n        145: \"Scroll Lock\",\r\n        182: \"My Computer\",\r\n        183: \"My Calculator\",\r\n        186: \";\",\r\n        187: \"=\",\r\n        188: \",\",\r\n        189: \"-\",\r\n        190: \".\",\r\n        191: \"/\",\r\n        192: \"`\",\r\n        219: \"[\",\r\n        220: \"\\\\\",\r\n        221: \"]\",\r\n        222: \"'\"\r\n    };\r\n    if (keyCodeMap[keycode]) {\r\n        return keyCodeMap[keycode];\r\n    }\r\n    console.log(`Unknow Key(Key Code:${keycode})`);\r\n    return \"\";\r\n}\r\n/**\r\n * @desc 深拷贝，支持常见类型\r\n * @param {Any} values\r\n * @return {Any}\r\n */\r\nfunction deepClone(values) {\r\n    let copy;\r\n    // Handle the 3 simple types, and null or undefined\r\n    if (values == null || typeof values !== \"object\")\r\n        return values;\r\n    // Handle Date\r\n    if (values instanceof Date) {\r\n        copy = new Date();\r\n        copy.setTime(values.getTime());\r\n        return copy;\r\n    }\r\n    // Handle Array\r\n    if (values instanceof Array) {\r\n        copy = [];\r\n        for (let i = 0, len = values.length; i < len; i++) {\r\n            copy[i] = deepClone(values[i]);\r\n        }\r\n        return copy;\r\n    }\r\n    // Handle Object\r\n    if (values instanceof Object) {\r\n        copy = {};\r\n        for (const attr in values) {\r\n            if (values.hasOwnProperty(attr))\r\n                copy[attr] = deepClone(values[attr]);\r\n        }\r\n        return copy;\r\n    }\r\n    throw new Error(\"Unable to copy values! Its type isn't supported.\");\r\n}\r\n/**\r\n *\r\n * @desc   判断`obj`是否为空\r\n * @param  {Object} obj\r\n * @return {Boolean}\r\n */\r\nfunction isEmptyObject(obj) {\r\n    if (!obj || typeof obj !== \"object\" || Array.isArray(obj))\r\n        return false;\r\n    return !Object.keys(obj).length;\r\n}\r\n/**\r\n *\r\n * @desc 随机生成颜色\r\n * @return {String}\r\n */\r\nfunction randomColor() {\r\n    return `#${`00000${((Math.random() * 0x1000000) << 0).toString(16)}`.slice(-6)}`;\r\n}\r\n/**\r\n *\r\n * @desc 生成指定范围[min, max]的随机数\r\n * @param  {Number} min\r\n * @param  {Number} max\r\n * @return {Number}\r\n */\r\nfunction randomNum(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n/**\r\n *\r\n * @desc 判断是否为16进制颜色，rgb 或 rgba\r\n * @param  {String}  str\r\n * @return {Boolean}\r\n */\r\nfunction isColor(str) {\r\n    return /^(#([0-9a-fA-F]{3}){1,2}|[rR][gG][Bb](\\((\\s*(2[0-4]\\d|25[0-5]|[01]?\\d{1,2})\\s*,){2}\\s*(2[0-4]\\d|25[0-5]|[01]?\\d{1,2})\\s*\\)|[Aa]\\((\\s*(2[0-4]\\d|25[0-5]|[01]?\\d{1,2})\\s*,){3}\\s*([01]|0\\.\\d+)\\s*\\)))$/.test(str);\r\n}\r\n/**\r\n *\r\n * @desc   判断是否为邮箱地址\r\n * @param  {String}  str\r\n * @return {Boolean}\r\n */\r\nfunction isEmail(str) {\r\n    return /\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(str);\r\n}\r\n/**\r\n *\r\n * @desc  判断是否为身份证号\r\n * @param  {String|Number} str\r\n * @return {Boolean}\r\n */\r\nfunction isIdCard(str) {\r\n    return /^(^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$)|(^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])((\\d{4})|\\d{3}[Xx])$)$/.test(str);\r\n}\r\n/**\r\n *\r\n * @desc 判断是否为数字\r\n * @param  {Any}  obj\r\n * @return {Boolean}\r\n */\r\nfunction isNumber(obj) {\r\n    return (Object.prototype.toString.call(obj) === \"[object Number]\" && isFinite(obj));\r\n}\r\n/**\r\n *\r\n * @desc   判断是否为手机号\r\n * @param  {String|Number} str\r\n * @return {Boolean}\r\n */\r\nfunction isPhoneNum(str) {\r\n    return /^(\\+?0?86\\-?)?1[3456789]\\d{9}$/.test(str);\r\n}\r\n/**\r\n *\r\n * @desc   判断是否为URL地址\r\n * @param  {String} str\r\n * @return {Boolean}\r\n */\r\nfunction isUrl(str) {\r\n    return /[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/i.test(str);\r\n}\r\n/**\r\n *\r\n * @desc   现金额转大写\r\n * @param  {Number} n\r\n * @return {String}\r\n */\r\nfunction digitUppercase(n) {\r\n    const fraction = [\"角\", \"分\"];\r\n    const digit = [\"零\", \"壹\", \"贰\", \"叁\", \"肆\", \"伍\", \"陆\", \"柒\", \"捌\", \"玖\"];\r\n    const unit = [\r\n        [\"元\", \"万\", \"亿\"],\r\n        [\"\", \"拾\", \"佰\", \"仟\"]\r\n    ];\r\n    const head = n < 0 ? \"欠\" : \"\";\r\n    n = Math.abs(n);\r\n    let s = \"\";\r\n    for (let i = 0; i < fraction.length; i++) {\r\n        s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, \"\");\r\n    }\r\n    s = s || \"整\";\r\n    n = Math.floor(n);\r\n    for (let i = 0; i < unit[0].length && n > 0; i++) {\r\n        let p = \"\";\r\n        for (let j = 0; j < unit[1].length && n > 0; j++) {\r\n            p = digit[n % 10] + unit[1][j] + p;\r\n            n = Math.floor(n / 10);\r\n        }\r\n        s = p.replace(/(零.)*零$/, \"\").replace(/^$/, \"零\") + unit[0][i] + s;\r\n    }\r\n    return (head +\r\n        s\r\n            .replace(/(零.)*零元/, \"元\")\r\n            .replace(/(零.)+/g, \"零\")\r\n            .replace(/^整$/, \"零元整\"));\r\n}\r\n/**\r\n *\r\n * @desc 判断浏览器是否支持webP格式图片\r\n * @return {Boolean}\r\n */\r\nfunction isSupportWebP() {\r\n    return (!![].map &&\r\n        document\r\n            .createElement(\"canvas\")\r\n            .toDataURL(\"image/webp\")\r\n            .indexOf(\"data:image/webp\") == 0);\r\n}\r\n/**\r\n * @desc   格式化${startTime}距现在的已过时间\r\n * @param  {String} startTime\r\n * @return {String}\r\n */\r\nfunction formatPassTime(startTime) {\r\n    const aftertime = Date.parse(new Date(startTime).toISOString());\r\n    const currentTime = Date.parse(new Date().toISOString());\r\n    const time = currentTime - aftertime;\r\n    const day = parseInt(`${time / (1000 * 60 * 60 * 24)}`);\r\n    const hour = parseInt(`${time / (1000 * 60 * 60)}`);\r\n    const min = parseInt(`${time / (1000 * 60)}`);\r\n    const month = parseInt(`${day / 30}`);\r\n    const year = parseInt(`${month / 12}`);\r\n    if (year)\r\n        return `${year}年前`;\r\n    if (month)\r\n        return `${month}个月前`;\r\n    if (day)\r\n        return `${day}天前`;\r\n    if (hour)\r\n        return `${hour}小时前`;\r\n    if (min)\r\n        return `${min}分钟前`;\r\n    return \"刚刚\";\r\n}\r\n/**\r\n *\r\n * @desc   格式化现在距${endTime}的剩余时间\r\n * @param  {Date} endTime\r\n * @return {String}\r\n */\r\nfunction formatRemainTime(endTime) {\r\n    const startDate = new Date(); // 开始时间\r\n    const endDate = new Date(endTime); // 结束时间\r\n    const t = endDate.getTime() - startDate.getTime(); // 时间差\r\n    let d = 0;\r\n    let h = 0;\r\n    let m = 0;\r\n    let s = 0;\r\n    if (t >= 0) {\r\n        d = Math.floor(t / 1000 / 3600 / 24);\r\n        h = Math.floor((t / 1000 / 60 / 60) % 24);\r\n        m = Math.floor((t / 1000 / 60) % 60);\r\n        s = Math.floor((t / 1000) % 60);\r\n    }\r\n    return `${d}天 ${h}小时 ${m}分钟 ${s}秒`;\r\n}\r\n/**\r\n *\r\n * @desc 是否为闰年\r\n * @param {Number} year\r\n * @return {Boolean}\r\n */\r\nfunction isLeapYear(year) {\r\n    if (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @desc   判断是否为同一天\r\n * @param  {Date} date1\r\n * @param  {Date} date2 可选／默认值：当天\r\n * @return {Boolean}\r\n */\r\nfunction isSameDay(date1, date2) {\r\n    if (!date2) {\r\n        date2 = new Date();\r\n    }\r\n    const date1_year = date1.getFullYear();\r\n    const date1_month = date1.getMonth() + 1;\r\n    const date1_date = date1.getDate();\r\n    const date2_year = date2.getFullYear();\r\n    const date2_month = date2.getMonth() + 1;\r\n    const date2_date = date2.getDate();\r\n    return (date1_date === date2_date &&\r\n        date1_month === date2_month &&\r\n        date1_year === date2_year);\r\n}\r\n/**\r\n * @desc 获取指定日期月份的总天数\r\n * @param {Date} time\r\n * @return {Number}\r\n */\r\nfunction monthDays(date) {\r\n    const time = new Date(date);\r\n    const year = time.getFullYear();\r\n    const month = time.getMonth() + 1;\r\n    return new Date(year, month, 0).getDate();\r\n}\r\n/**\r\n * @desc ${startTime - endTime}的剩余时间,startTime大于endTime时，均返回0\r\n * @param { Date | String } startTime\r\n * @param { Date | String } endTime\r\n * @return { Object } { d, h, m, s } 天 时 分 秒\r\n */\r\nfunction timeLeft(startTime, endTime) {\r\n    if (!startTime || !endTime) {\r\n        return false;\r\n    }\r\n    let startDate;\r\n    let endDate;\r\n    if (startTime instanceof Date) {\r\n        startDate = startTime;\r\n    }\r\n    else {\r\n        startDate = new Date(startTime.replace(/-/g, \"/\")); // 开始时间\r\n    }\r\n    if (endTime instanceof Date) {\r\n        endDate = endTime;\r\n    }\r\n    else {\r\n        endDate = new Date(endTime.replace(/-/g, \"/\")); // 结束时间\r\n    }\r\n    const t = endDate.getTime() - startDate.getTime();\r\n    let d = 0;\r\n    let h = 0;\r\n    let m = 0;\r\n    let s = 0;\r\n    if (t >= 0) {\r\n        d = Math.floor(t / 1000 / 3600 / 24);\r\n        h = Math.floor((t / 1000 / 60 / 60) % 24);\r\n        m = Math.floor((t / 1000 / 60) % 60);\r\n        s = Math.floor((t / 1000) % 60);\r\n    }\r\n    return { d, h, m, s };\r\n}\r\n/**\r\n *\r\n * @desc   url参数转对象\r\n * @param  {String} url  default: window.location.href\r\n * @return {Object}\r\n */\r\nfunction parseQuery(query) {\r\n    query = !query ? window.location.href : query;\r\n    const queryWithoutStart = query.indexOf(\"?\") === 0 ? query.substring(1) : query;\r\n    const uaFormated = {};\r\n    const strs = queryWithoutStart.split(\"&\");\r\n    for (let querySingle in strs) {\r\n        uaFormated[querySingle.split(\"=\")[0]] = unescape(querySingle.split(\"=\")[1]);\r\n    }\r\n    return uaFormated;\r\n}\r\n/**\r\n *\r\n * @desc   对象序列化\r\n * @param  {Object} obj\r\n * @return {String}\r\n */\r\nfunction stringfyQueryString(obj) {\r\n    if (!obj)\r\n        return \"\";\r\n    const pairs = [];\r\n    for (const key in obj) {\r\n        const value = obj[key];\r\n        if (value instanceof Array) {\r\n            for (let i = 0; i < value.length; ++i) {\r\n                pairs.push(`${encodeURIComponent(`${key}[${i}]`)}=${encodeURIComponent(value[i])}`);\r\n            }\r\n            continue;\r\n        }\r\n        pairs.push(`${encodeURIComponent(key)}=${encodeURIComponent(obj[key])}`);\r\n    }\r\n    return pairs.join(\"&\");\r\n}\r\n/**\r\n * @description base64转blob\r\n * @param urlData base64编码\r\n */\r\nfunction convertBase64UrlToBlob(urlData) {\r\n    const arr = urlData.split(\",\");\r\n    const mime = arr[0].match(/:(.*?);/)[1];\r\n    const bstr = atob(arr[1]);\r\n    let n = bstr.length;\r\n    const u8arr = new Uint8Array(n);\r\n    while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new Blob([u8arr], { type: mime });\r\n}\r\n/**\r\n *\r\n * @desc   获取UUID\r\n * @return {String}\r\n */\r\nfunction getUUID() {\r\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\r\n        const r = (Math.random() * 16) | 0;\r\n        const v = c == \"x\" ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\r\n/**\r\n *\r\n * @desc   获取浏览器信息\r\n * @return  {Object} obj\r\n */\r\nfunction getBrowser() {\r\n    const Sys = { name: \"\", ver: \"\" };\r\n    const ua = navigator.userAgent.toLowerCase();\r\n    const re = /(msie|firefox|chrome|opera|version).*?([\\d.]+)/;\r\n    const m = ua.match(re);\r\n    if (!m) {\r\n        return {\r\n            Sys: {\r\n                name: \"\",\r\n                ver: \"\"\r\n            },\r\n            info: \"\"\r\n        };\r\n    }\r\n    Sys.name = m[1].replace(/version/, \"safari\");\r\n    Sys.ver = m[2];\r\n    return { Sys, info: ua };\r\n}\r\n/**\r\n *\r\n * @desc   获取系统名称和版本号\r\n * @return {String} example: mac68k win7\r\n */\r\nfunction checkOS() {\r\n    const sUserAgent = navigator.userAgent.toLowerCase();\r\n    const sPlatform = navigator.platform.toLowerCase();\r\n    const isWin = sPlatform === \"win32\" || sPlatform === \"windows\";\r\n    const isMac = sPlatform === \"mac68k\" ||\r\n        sPlatform === \"macppc\" ||\r\n        sPlatform === \"macintosh\" ||\r\n        sPlatform === \"macintel\";\r\n    const isUnix = sPlatform === \"x11\" && !isWin && !isMac;\r\n    const isLinux = String(sPlatform).indexOf(\"linux\") > -1;\r\n    if (isMac)\r\n        return \"MAC\";\r\n    if (isUnix)\r\n        return \"Unix\";\r\n    if (isLinux)\r\n        return \"Linux\";\r\n    if (isWin) {\r\n        const isWin2K = sUserAgent.indexOf(\"windows nt 5.0\") > -1 ||\r\n            sUserAgent.indexOf(\"windows 2000\") > -1;\r\n        if (isWin2K)\r\n            return \"Win2000\";\r\n        const isWinXP = sUserAgent.indexOf(\"windows nt 5.1\") > -1 ||\r\n            sUserAgent.indexOf(\"windows xp\") > -1;\r\n        if (isWinXP)\r\n            return \"WinXP\";\r\n        const isWin2003 = sUserAgent.indexOf(\"windows nt 5.2\") > -1 ||\r\n            sUserAgent.indexOf(\"windows 2003\") > -1;\r\n        if (isWin2003)\r\n            return \"Win2003\";\r\n        const isWinVista = sUserAgent.indexOf(\"windows nt 6.0\") > -1 ||\r\n            sUserAgent.indexOf(\"windows vista\") > -1;\r\n        if (isWinVista)\r\n            return \"WinVista\";\r\n        const isWin7 = sUserAgent.indexOf(\"windows nt 6.1\") > -1 ||\r\n            sUserAgent.indexOf(\"windows 7\") > -1;\r\n        if (isWin7)\r\n            return \"Win7\";\r\n        const isWin8 = sUserAgent.indexOf(\"windows nt 6.2\") > -1 ||\r\n            sUserAgent.indexOf(\"windows nt 6.3\") > -1 ||\r\n            sUserAgent.indexOf(\"windows 8\") > -1;\r\n        if (isWin8)\r\n            return \"Win8\";\r\n        const isWin10 = sUserAgent.indexOf(\"windows nt 10\") > -1 ||\r\n            sUserAgent.indexOf(\"windows 10\") > -1;\r\n        if (isWin10)\r\n            return \"Win10\";\r\n    }\r\n    return \"other\";\r\n}\r\n/**\r\n *\r\n * @desc   从sessionStorage获取UserId，如无根据ISO时间戳生成\r\n * @return {String}\r\n */\r\nfunction getUserId() {\r\n    const userId = sessionStorage.getItem(\"userId\");\r\n    if (userId) {\r\n        return userId;\r\n    }\r\n    const temp = (Date.parse(new Date().toISOString()) % 100000000) / 1000;\r\n    const userIdTemp = `${Number.parseInt(temp)}`;\r\n    sessionStorage.setItem(\"userId\", userIdTemp);\r\n    return userIdTemp;\r\n}\r\n/**\r\n *\r\n * @desc   获取Mac系统版本\r\n * @return {String}\r\n */\r\nfunction getMacOsVersion() {\r\n    return navigator.userAgent.substr(navigator.userAgent.indexOf(\"OS X\") + 5, navigator.userAgent\r\n        .substr(navigator.userAgent.indexOf(\"OS X\") + 5)\r\n        .indexOf(\")\"));\r\n}\r\n/**\r\n *\r\n * @desc   给要加载的js文件添加属性，比如Tag\r\n * @return {HTMLScriptElement}\r\n */\r\nconst buildScriptTag = (src, attrs) => {\r\n    const script = document.createElement('script');\r\n    script.type = 'text/javascript';\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.src = src;\r\n    for (let attr in Object.keys(attrs)) {\r\n        script.setAttribute(attr, attrs[attr]);\r\n    }\r\n    return script;\r\n};\r\n/**\r\n * @desc    异步加载script\r\n */\r\nfunction loadScript(url, attrs = {}) {\r\n    const script = buildScriptTag(url, attrs);\r\n    const p = new Promise((resolve, reject) => {\r\n        script.onload = () => {\r\n            resolve();\r\n        };\r\n        script.onerror = () => {\r\n            reject();\r\n        };\r\n    });\r\n    document.body.appendChild(script);\r\n    return p;\r\n}\r\nconst uaParsed = navigator ? parseQuery(navigator.userAgent) : {};\r\n/**\r\n * @desc    系统信息判断获取\r\n */\r\nconst platform = {\r\n    /**\r\n     * 是否为mobile\r\n     */\r\n    mobile: typeof navigator !== 'undefined' &&\r\n        /(Android|iPhone|SymbianOS|Windows\\ Phone|iPad|iPod)/i.test(navigator.userAgent),\r\n    /**\r\n     * 是否为ios\r\n     */\r\n    ios: typeof navigator !== 'undefined' && /(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent),\r\n    /**\r\n     * 是否为android\r\n     */\r\n    android: typeof navigator !== 'undefined' && /(Android)/i.test(navigator.userAgent),\r\n    /**\r\n     * 是否为微信webview\r\n     */\r\n    weixinwebview: typeof navigator !== 'undefined' && /MicroMessenger/i.test(navigator.userAgent),\r\n    /**\r\n     * 是否为微信小程序\r\n     */\r\n    miniprogram: typeof wx !== 'undefined' && typeof wx.getSystemInfo !== 'undefined',\r\n    /**\r\n     * 是否为美术宝一对一app\r\n     */\r\n    msb1v1app: typeof navigator !== 'undefined' &&\r\n        typeof uaParsed.ua !== 'undefined' &&\r\n        (uaParsed.ua.includes('ydy') || uaParsed.ua.includes('vwb')),\r\n};\n\nexport { addClass, arrayEqual, checkOS, convertBase64UrlToBlob, debounce, deepClone, digitUppercase, formatPassTime, formatPos, formatRemainTime, getBrowser, getCookie, getEle, getExplore, getKeyName, getMacOsVersion, getOS, getScrollTop, getUId, getUUID, getUserId, hasClass, isColor, isEmail, isEmptyObject, isIdCard, isLeapYear, isNumber, isPhoneNum, isSameDay, isSupportWebP, isUrl, loadScript, monthDays, now, offset, parseQuery, platform, randomColor, randomNum, removeClass, removeCookie, scrollTo, setCookie, setScrollTop, stringfyQueryString, throttle, timeLeft, windowResize };\n//# sourceMappingURL=index.js.map\n","import { UserStatus } from './types';\nimport { platform } from '@mrjl/utils';\nconst webchatGroupidConfig: { [key: string]: any } = {\n  test: {\n    vip: 'c391e14143704d6dab466627216074db',\n    user: '8babcc48c586436ca95910514bd45f44',\n    noUser: '8babcc48c586436ca95910514bd45f44'\n  },\n  online: {\n    vip: 'b7bc46a1cc574a8f8d928aa15a76c3db',\n    user: '90028686d3074163a84e933b5c144113',\n    noUser: '90028686d3074163a84e933b5c144113'\n  }\n};\nconst isonline: boolean =\n  !platform.miniprogram && window.location.hostname === 'vip.meishubao.com';\n\nexport default function generateServiceGroup(\n  userStatus: UserStatus,\n  env?: 'online' | 'test'\n): { groupid: string; sysnum: string; robotid: number } {\n  const currentEnv: string = env ? env : isonline ? 'online' : 'test';\n  const groupid: string = webchatGroupidConfig[currentEnv][userStatus];\n  const sysnum = 'fce2741b560141a189049555c54922e8';\n  const robotid: number = userStatus === 'vip' ? 2 : 1;\n  return { groupid, sysnum, robotid };\n}\n","import { UserStatus } from './types';\n// const webchatGroupidConfig: { [key: string]: any } = {\n//     test: {\n//         vip: 'c391e14143704d6dab466627216074db',\n//         user: '8babcc48c586436ca95910514bd45f44',\n//         noUser: '8babcc48c586436ca95910514bd45f44'\n//     },\n//     online: {\n//         vip: 'b7bc46a1cc574a8f8d928aa15a76c3db',\n//         user: '90028686d3074163a84e933b5c144113',\n//         noUser: '90028686d3074163a84e933b5c144113'\n//     }\n// };\n\n// sysnum 15f8f7e3ff534554a8478e4b4c5576cd\n\n// groupid 86a6fdd8d34147a7b06881665821dee9\n// const isonline: boolean = window.location.hostname === 'vip.meishubao.com';\n\nexport default function generateServiceGroup(\n  userStatus: UserStatus,\n  env?: 'online' | 'test'\n): { groupid: string; sysnum: string } {\n  // const env: string = isonline ? 'online' : 'test';\n  // const groupid: string = webchatGroupidConfig[env][userStatus];\n  const groupid = '86a6fdd8d34147a7b06881665821dee9';\n  const sysnum = '15f8f7e3ff534554a8478e4b4c5576cd';\n  return { groupid, sysnum };\n}\n","import {platform as client, loadScript} from '@mrjl/utils';\nimport generateOnebyoneServiceGroup from './onebyone';\nimport generateSmallclassServiceGroup from './smallclass';\nimport { UserStatus } from './types';\n\n// 注册全局变量\ndeclare global {\n  interface Window {\n    zc: (action: string, options: { [key: string]: any }) => void;\n    cbk: any[];\n  }\n}\n// 平台类型\nenum platform {\n  PC,\n  WECHAT,\n  APP,\n  WEB,\n  MOBILE\n}\nconst source: platform = client.weixinwebview\n  ? platform.WECHAT\n  : client.msb1v1app\n  ? platform.APP\n  : client.mobile\n  ? platform.MOBILE\n  : platform.PC;\n\nfunction generateServiceIconUi(): void {\n  const chatIconStyle: { [key: string]: string } = {\n    position: 'fixed',\n    'z-index': '99999',\n    'box-shadow': 'rgba(15 ,66 ,76 ,0.25) 0px 0px 14px 0px',\n    width: '60px',\n    height: '60px',\n    'border-radius': '50%',\n    'background-color': 'rgb(231 ,83 ,73)',\n    'background-image': 'url(//www.sobot.com/chat/frame/imgs/icon.png)',\n    'background-repeat': 'no-repeat',\n    'background-position': '18px -58px',\n    right: '20px',\n    bottom: '40px',\n    cursor: 'pointer'\n  };\n  const div = document.createElement('div');\n  div.className = 'webchat';\n  let styleText = '';\n  for (const styleFeild in chatIconStyle) {\n    styleText += styleFeild + ':' + chatIconStyle[styleFeild] + ';';\n  }\n  div.style.cssText = styleText;\n  document.body.appendChild(div);\n}\n\ntype Product = '1v1' | 'smallclass';\n\nfunction generateServiceGroup(\n  product: Product,\n  userStatus: UserStatus,\n  env?: 'online' | 'test'\n): { groupid: string; sysnum: string; robotid?: number } {\n  if (product === '1v1') {\n    return generateOnebyoneServiceGroup(userStatus, env);\n  } else {\n    return generateSmallclassServiceGroup(userStatus, env);\n  }\n}\n\ninterface ZhichiConfig {\n  product: Product; // 产品名称：一对一或小班课\n  partnerid: string; // 用户id\n  userStatus: UserStatus; // 用户身份\n  type?: number; // 客服模式 1: 仅机器人客服模式 2: 仅人工客服模式 3: 机器人客服优先模式 4: 人工客服优先模式\n  groupid?: string; // 客服组id\n  agentid?: string; // 指定客服接待 客服id\n  className?: string; // 咨询按钮类名\n  locale?: string; //en: 英文， cn: 简体中文，tw: 繁体中文（默认简体中文）\n  anchor?: boolean; // 是否新窗口打开，默认false\n  env?: 'online' | 'test'; // 传入环境配置，测试环境或正式环境\n  zhichiCustomeSetting?: object;\n}\n\nfunction initZhichi(config: ZhichiConfig): void {\n  config.className === undefined && generateServiceIconUi();\n  const { groupid, sysnum, robotid } = generateServiceGroup(\n    config.product,\n    config.userStatus,\n    config.env\n  );\n  let gid: string = groupid;\n  config.groupid && !config.agentid && (gid = config.groupid);\n  config.agentid && !config.groupid && (gid = '');\n  const attrs: { [key: string]: any } = {\n    async: true,\n    id: 'zhichiScript',\n    class: config.className || 'webchat'\n  };\n  window.zc = function(...args: any) {\n    window.cbk = window.cbk || [];\n    window.cbk.push(args);\n  };\n  loadScript(\n    `https://chat.sobot.com/chat/frame/v2/entrance.js?sysnum=${sysnum}`,\n    attrs\n  );\n\n  interface ZhichiParams {\n    partnerid?: string;\n    source: platform;\n  }\n\n  const params: ZhichiParams = {\n    source\n  };\n  config.partnerid && (params.partnerid = config.partnerid);\n  window.zc('config', {\n    custom: true,\n    type: config.type,\n    groupid: gid,\n    robotid,\n    anchor: config.anchor,\n    locale: config.locale || 'cn',\n    agentid: config.agentid,\n    ...params,\n    ...config.zhichiCustomeSetting,\n    params: JSON.stringify(params)\n  });\n}\n\nexport default initZhichi;\n"],"names":["generateServiceGroup","platform","client","generateOnebyoneServiceGroup","generateSmallclassServiceGroup"],"mappings":"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"}