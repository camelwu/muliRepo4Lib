{"version":3,"file":"index.js","sources":["../../utils/lib/index.js","../src/config/config.ts","../src/canvas.ts","../src/config/drawType.ts","../src/controllers/DrawController.ts","../src/controllers/FreeDrawController.ts","../src/controllers/CircleDrawController.ts","../src/controllers/DeleteDrawController.ts","../src/controllers/DefaultDrawController.ts","../src/controllers/ClipDrawController.ts","../src/controllers/SelectDrawController.ts","../src/MouseDraw.ts","../src/index.ts"],"sourcesContent":["/*!\n * (c) 2014-2020 FE-Team\n * Released under the Apache License.\n */\n/**\r\n *\r\n * @desc 判断两个数组是否相等\r\n * @param {Array} arr1\r\n * @param {Array} arr2\r\n * @return {Boolean}\r\n */\r\nfunction arrayEqual(arr1, arr2) {\r\n    if (arr1 === arr2)\r\n        return true;\r\n    if (arr1.length !== arr2.length)\r\n        return false;\r\n    for (let i = 0; i < arr1.length; ++i) {\r\n        if (arr1[i] !== arr2[i])\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n *\r\n * @desc 判断元素是否有某个class\r\n * @param {HTMLElement} ele\r\n * @param {String} cls\r\n * @return {Boolean}\r\n */\r\nfunction hasClass(ele, cls) {\r\n    return new RegExp(`(\\\\s|^)${cls}(\\\\s|$)`).test(ele.className);\r\n}\r\n/**\r\n *\r\n * @desc   为元素添加class\r\n * @param  {HTMLElement} ele\r\n * @param  {String} cls\r\n */\r\nfunction addClass(ele, cls) {\r\n    if (!hasClass(ele, cls)) {\r\n        ele.className += ` ${cls}`;\r\n    }\r\n}\r\n/**\r\n *\r\n * @desc 为元素移除class\r\n * @param {HTMLElement} ele\r\n * @param {String} cls\r\n */\r\nfunction removeClass(ele, cls) {\r\n    if (hasClass(ele, cls)) {\r\n        const reg = new RegExp(`(\\\\s|^)${cls}(\\\\s|$)`);\r\n        ele.className = ele.className.replace(reg, \" \");\r\n    }\r\n}\r\n/**\r\n *\r\n * @desc 根据name读取cookie\r\n * @param  {String} name\r\n * @return {String}\r\n */\r\nfunction getCookie(name) {\r\n    const arr = document.cookie.replace(/\\s/g, \"\").split(\";\");\r\n    for (let i = 0; i < arr.length; i++) {\r\n        const tempArr = arr[i].split(\"=\");\r\n        if (tempArr[0] === name) {\r\n            return decodeURIComponent(tempArr[1]);\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\n/**\r\n *\r\n * @desc 根据name删除cookie\r\n * @param  {String} name\r\n */\r\nfunction removeCookie(name) {\r\n    // 设置已过期，系统会立刻删除cookie\r\n    setCookie(name, \"1\", -1);\r\n}\r\n/**\r\n *\r\n * @desc  设置Cookie\r\n * @param {String} name\r\n * @param {String} value\r\n * @param {Number} days\r\n */\r\nfunction setCookie(name, value, days) {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() + days);\r\n    document.cookie = `${name}=${value};expires=${date}`;\r\n}\r\n/**\r\n *\r\n * @desc 获取浏览器类型和版本\r\n * @return {String}\r\n */\r\nfunction getExplore() {\r\n    const sys = {};\r\n    const ua = navigator.userAgent.toLowerCase();\r\n    let s;\r\n    (s = ua.match(/rv:([\\d.]+)\\) like gecko/))\r\n        ? (sys.ie = s[1])\r\n        : (s = ua.match(/msie ([\\d\\.]+)/))\r\n            ? (sys.ie = s[1])\r\n            : (s = ua.match(/edge\\/([\\d\\.]+)/))\r\n                ? (sys.edge = s[1])\r\n                : (s = ua.match(/firefox\\/([\\d\\.]+)/))\r\n                    ? (sys.firefox = s[1])\r\n                    : (s = ua.match(/(?:opera|opr).([\\d\\.]+)/))\r\n                        ? (sys.opera = s[1])\r\n                        : (s = ua.match(/chrome\\/([\\d\\.]+)/))\r\n                            ? (sys.chrome = s[1])\r\n                            : (s = ua.match(/version\\/([\\d\\.]+).*safari/))\r\n                                ? (sys.safari = s[1])\r\n                                : 0;\r\n    // 根据关系进行判断\r\n    if (sys.ie)\r\n        return `IE: ${sys.ie}`;\r\n    if (sys.edge)\r\n        return `EDGE: ${sys.edge}`;\r\n    if (sys.firefox)\r\n        return `Firefox: ${sys.firefox}`;\r\n    if (sys.chrome)\r\n        return `Chrome: ${sys.chrome}`;\r\n    if (sys.opera)\r\n        return `Opera: ${sys.opera}`;\r\n    if (sys.safari)\r\n        return `Safari: ${sys.safari}`;\r\n    return \"Unknown\";\r\n}\r\n/**\r\n *\r\n * @desc 获取操作系统类型\r\n * @return {String}\r\n */\r\nfunction getOS() {\r\n    const userAgent = (\"navigator\" in window &&\r\n        \"userAgent\" in navigator &&\r\n        navigator.userAgent.toLowerCase()) ||\r\n        \"\";\r\n    // let vendor = 'navigator' in window && 'vendor' in navigator && navigator.vendor.toLowerCase() || '';\r\n    const appVersion = (\"navigator\" in window &&\r\n        \"appVersion\" in navigator &&\r\n        navigator.appVersion.toLowerCase()) ||\r\n        \"\";\r\n    if (/iphone/i.test(userAgent) ||\r\n        /ipad/i.test(userAgent) ||\r\n        /ipod/i.test(userAgent))\r\n        return \"ios\";\r\n    if (/android/i.test(userAgent))\r\n        return \"android\";\r\n    if (/win/i.test(appVersion) && /phone/i.test(userAgent))\r\n        return \"windowsPhone\";\r\n    if (/mac/i.test(appVersion))\r\n        return \"MacOSX\";\r\n    if (/win/i.test(appVersion))\r\n        return \"windows\";\r\n    if (/linux/i.test(appVersion))\r\n        return \"linux\";\r\n    return \"Unknown\";\r\n}\r\n/**\r\n * 生成一个UID，保证同一时刻生成的值，不同即可，只能用于单机，\r\n * 不能用来共享，比如：当前生成的ID存到服务器上，会存在重复的风险\r\n */\r\nfunction getUId() {\r\n    const resAry = Array(4);\r\n    const currentTime = new Date().getTime();\r\n    const uidAry = resAry.map(() => {\r\n        // eslint-disable-next-line no-bitwise\r\n        return `${(Math.random() * 16) | 0}`;\r\n    });\r\n    uidAry.push(currentTime.toString(16));\r\n    return uidAry.join(\"\");\r\n}\r\n/**\r\n * 根据当前选择器获取cavase元素\r\n *\r\n * @param {Number} ele\r\n * @return {Object} {x: Num, y: Num}\r\n */\r\nfunction formatPos(mouseX, mouseY) {\r\n    const zoom = window.zoom || 1;\r\n    return { x: mouseX / zoom, y: mouseY / zoom };\r\n}\r\n/**\r\n * 获取当前时间\r\n *\r\n * @return {Number} 时间戳\r\n */\r\nfunction now() {\r\n    if (Date.now) {\r\n        return Date.now();\r\n    }\r\n    return new Date().getTime();\r\n}\r\n/**\r\n * @desc 函数防抖\r\n * 与throttle不同的是，debounce保证一个函数在多少毫秒内不再被触发，只会执行一次，\r\n * 要么在第一次调用return的防抖函数时执行，要么在延迟指定毫秒后调用。\r\n * @example 适用场景：如在线编辑的自动存储防抖。\r\n * @param  {Function} func          延迟毫秒后执行的函数。`this`上下文和所有参数都是按原样传递的，\r\n *                                  执行去抖动功能时，，调用`callback`。\r\n * @param  {Number}   wait          0或者更大的毫秒数。 对于事件回调，大约100或250毫秒（或更高）的延迟是最有用的。\r\n * @param  {Boolean}  immediate     可选，默认为false。\r\n *                                  如果为false或未传入，回调函数则在第一次调用return的防抖函数后延迟指定毫秒调用。\r\n *                                  如果为true，回调函数则在第一次调用return的防抖函数时直接执行\r\n *\r\n * @return {Function} 新的防抖函数。\r\n */\r\nfunction debounce(func, wait, immediate) {\r\n    let timeout;\r\n    return function executedFunction(...args) {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const context = this;\r\n        // eslint-disable-next-line prefer-rest-params\r\n        // const args: any[] = args;\r\n        const later = () => {\r\n            timeout = null;\r\n            if (!immediate)\r\n                func.apply(context, args);\r\n        };\r\n        const callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow)\r\n            func.apply(context, args);\r\n    };\r\n}\r\n/**\r\n *\r\n * @desc 获取元素\r\n * @param {string | HTMLElement} ele\r\n * @return {HTMLElement}\r\n * getEle(ele: any): Element;\r\n * getEle(ele: string): HTMLElement;\r\n * getEle(ele: \"canvas\"): HTMLCanvasElement;\r\n */\r\nfunction getEle(ele) {\r\n    if (typeof ele === \"string\") {\r\n        return document.querySelector(ele);\r\n    }\r\n    return ele;\r\n}\r\n/**\r\n *\r\n * @desc 获取滚动条距顶部的距离\r\n * @return {Number}\r\n */\r\nfunction getScrollTop() {\r\n    return ((document.documentElement && document.documentElement.scrollTop) ||\r\n        document.body.scrollTop);\r\n}\r\n/**\r\n *\r\n * @desc  获取一个元素的距离文档(document)的位置，类似jQ中的offset()\r\n * @param {HTMLElement} ele\r\n * @returns { {left: number, top: number} }\r\n */\r\nfunction offset(ele) {\r\n    const pos = {\r\n        left: 0,\r\n        top: 0\r\n    };\r\n    // 递归冒泡\r\n    while (ele) {\r\n        pos.left += ele.offsetLeft;\r\n        pos.top += ele.offsetTop;\r\n        // @ts-ignore\r\n        ele = ele.offsetParent;\r\n    }\r\n    return pos;\r\n}\r\nvar requestAnimFrame = (function () {\r\n    // window.mozRequestAnimationFrame ||#ff低版本\r\n    return (window.requestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        function (callback) {\r\n            window.setTimeout(callback, 1000 / 60);\r\n        });\r\n})();\r\n/**\r\n *\r\n * @desc 设置滚动条距顶部的距离\r\n * @param {Number} value\r\n */\r\nfunction setScrollTop(value) {\r\n    window.scrollTo(0, value);\r\n    // return value;\r\n}\r\n/**\r\n *\r\n * @desc  在${duration}时间内，滚动条平滑滚动到${to}指定位置\r\n * @param {Number} to\r\n * @param {Number} duration\r\n */\r\nfunction scrollTo(to, duration) {\r\n    if (duration < 0) {\r\n        setScrollTop(to);\r\n        return;\r\n    }\r\n    const diff = to - getScrollTop();\r\n    if (diff === 0)\r\n        return;\r\n    const step = (diff / duration) * 10;\r\n    requestAnimFrame(function () {\r\n        if (Math.abs(step) > Math.abs(diff)) {\r\n            setScrollTop(getScrollTop() + diff);\r\n            return;\r\n        }\r\n        setScrollTop(getScrollTop() + step);\r\n        if ((diff > 0 && getScrollTop() >= to) ||\r\n            (diff < 0 && getScrollTop() <= to)) {\r\n            return;\r\n        }\r\n        scrollTo(to, duration - 16);\r\n    });\r\n}\r\n/**\r\n *\r\n * @desc H5软键盘缩回、弹起回调\r\n * 当软件键盘弹起会改变当前 window.innerHeight，监听这个值变化\r\n * @param {Function} downCb 当软键盘弹起后，缩回的回调\r\n * @param {Function} upCb 当软键盘弹起的回调\r\n */\r\nfunction windowResize(downCb, upCb) {\r\n    const clientHeight = window.innerHeight;\r\n    downCb = typeof downCb === \"function\" ? downCb : function () { };\r\n    upCb = typeof upCb === \"function\" ? upCb : function () { };\r\n    window.addEventListener(\"resize\", () => {\r\n        const height = window.innerHeight;\r\n        if (height === clientHeight) {\r\n            downCb();\r\n        }\r\n        if (height < clientHeight) {\r\n            upCb();\r\n        }\r\n    });\r\n}\r\n/**\r\n * @desc   函数节流。\r\n * 适用于限制`resize`和`scroll`等函数的调用频率\r\n *\r\n * @param  {Function}  func           延迟毫秒后执行的函数。`this`上下文和所有参数都是按原样传递的，\r\n *                                    执行去节流功能时，调用`callback`。\r\n * @param  {Number}    wait           0 或者更大的毫秒数。 对于事件回调，大约100或250毫秒（或更高）的延迟是最有用的。\r\n * @param  {Object}    options        可选，默认为false。\r\n *                                    如果noTrailing为true，当节流函数被调用，每过`delay`毫秒`callback`也将执行一次。\r\n *                                    如果noTrailing为false或者未传入，`callback`将在最后一次调用节流函数后再执行一次.\r\n *                                    （延迟`delay`毫秒之后，节流函数没有被调用,内部计数器会复位）\r\n *\r\n * @return {Function}  新的节流函数\r\n */\r\nfunction throttle(func, wait, options) {\r\n    let timeout;\r\n    let context;\r\n    let args;\r\n    let result;\r\n    let previous = 0;\r\n    // eslint-disable-next-line no-param-reassign\r\n    if (!options)\r\n        options = {};\r\n    const later = () => {\r\n        previous = options.leading === false ? 0 : now();\r\n        timeout = null;\r\n        result = func.apply(context, args);\r\n        if (!timeout) {\r\n            context = null;\r\n            args = null;\r\n        }\r\n    };\r\n    const throttled = (...targs) => {\r\n        // let now = Date.now()||new Date().getTime();\r\n        const tnow = now();\r\n        if (!previous && options.leading === false)\r\n            previous = tnow;\r\n        const remaining = wait - (tnow - previous);\r\n        // @ts-ignore\r\n        context = this;\r\n        // eslint-disable-next-line prefer-rest-params\r\n        args = targs;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = tnow;\r\n            result = func.apply(context, args);\r\n            if (!timeout) {\r\n                context = null;\r\n                args = null;\r\n            }\r\n        }\r\n        else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(later, remaining);\r\n        }\r\n        return result;\r\n    };\r\n    throttled.cancel = () => {\r\n        clearTimeout(timeout);\r\n        previous = 0;\r\n        timeout = null;\r\n        context = null;\r\n        args = null;\r\n    };\r\n    return throttled;\r\n}\r\n/**\r\n * @desc 根据keycode获得键名\r\n * @param  {Number} keycode\r\n * @return {String}\r\n */\r\nfunction getKeyName(keycode) {\r\n    const keyCodeMap = {\r\n        8: \"Backspace\",\r\n        9: \"Tab\",\r\n        13: \"Enter\",\r\n        16: \"Shift\",\r\n        17: \"Ctrl\",\r\n        18: \"Alt\",\r\n        19: \"Pause\",\r\n        20: \"Caps Lock\",\r\n        27: \"Escape\",\r\n        32: \"Space\",\r\n        33: \"Page Up\",\r\n        34: \"Page Down\",\r\n        35: \"End\",\r\n        36: \"Home\",\r\n        37: \"Left\",\r\n        38: \"Up\",\r\n        39: \"Right\",\r\n        40: \"Down\",\r\n        42: \"Print Screen\",\r\n        45: \"Insert\",\r\n        46: \"Delete\",\r\n        48: \"0\",\r\n        49: \"1\",\r\n        50: \"2\",\r\n        51: \"3\",\r\n        52: \"4\",\r\n        53: \"5\",\r\n        54: \"6\",\r\n        55: \"7\",\r\n        56: \"8\",\r\n        57: \"9\",\r\n        65: \"A\",\r\n        66: \"B\",\r\n        67: \"C\",\r\n        68: \"D\",\r\n        69: \"E\",\r\n        70: \"F\",\r\n        71: \"G\",\r\n        72: \"H\",\r\n        73: \"I\",\r\n        74: \"J\",\r\n        75: \"K\",\r\n        76: \"L\",\r\n        77: \"M\",\r\n        78: \"N\",\r\n        79: \"O\",\r\n        80: \"P\",\r\n        81: \"Q\",\r\n        82: \"R\",\r\n        83: \"S\",\r\n        84: \"T\",\r\n        85: \"U\",\r\n        86: \"V\",\r\n        87: \"W\",\r\n        88: \"X\",\r\n        89: \"Y\",\r\n        90: \"Z\",\r\n        91: \"Windows\",\r\n        93: \"Right Click\",\r\n        96: \"Numpad 0\",\r\n        97: \"Numpad 1\",\r\n        98: \"Numpad 2\",\r\n        99: \"Numpad 3\",\r\n        100: \"Numpad 4\",\r\n        101: \"Numpad 5\",\r\n        102: \"Numpad 6\",\r\n        103: \"Numpad 7\",\r\n        104: \"Numpad 8\",\r\n        105: \"Numpad 9\",\r\n        106: \"Numpad *\",\r\n        107: \"Numpad +\",\r\n        109: \"Numpad -\",\r\n        110: \"Numpad .\",\r\n        111: \"Numpad /\",\r\n        112: \"F1\",\r\n        113: \"F2\",\r\n        114: \"F3\",\r\n        115: \"F4\",\r\n        116: \"F5\",\r\n        117: \"F6\",\r\n        118: \"F7\",\r\n        119: \"F8\",\r\n        120: \"F9\",\r\n        121: \"F10\",\r\n        122: \"F11\",\r\n        123: \"F12\",\r\n        144: \"Num Lock\",\r\n        145: \"Scroll Lock\",\r\n        182: \"My Computer\",\r\n        183: \"My Calculator\",\r\n        186: \";\",\r\n        187: \"=\",\r\n        188: \",\",\r\n        189: \"-\",\r\n        190: \".\",\r\n        191: \"/\",\r\n        192: \"`\",\r\n        219: \"[\",\r\n        220: \"\\\\\",\r\n        221: \"]\",\r\n        222: \"'\"\r\n    };\r\n    if (keyCodeMap[keycode]) {\r\n        return keyCodeMap[keycode];\r\n    }\r\n    console.log(`Unknow Key(Key Code:${keycode})`);\r\n    return \"\";\r\n}\r\n/**\r\n * @desc 深拷贝，支持常见类型\r\n * @param {Any} values\r\n * @return {Any}\r\n */\r\nfunction deepClone(values) {\r\n    let copy;\r\n    // Handle the 3 simple types, and null or undefined\r\n    if (values == null || typeof values !== \"object\")\r\n        return values;\r\n    // Handle Date\r\n    if (values instanceof Date) {\r\n        copy = new Date();\r\n        copy.setTime(values.getTime());\r\n        return copy;\r\n    }\r\n    // Handle Array\r\n    if (values instanceof Array) {\r\n        copy = [];\r\n        for (let i = 0, len = values.length; i < len; i++) {\r\n            copy[i] = deepClone(values[i]);\r\n        }\r\n        return copy;\r\n    }\r\n    // Handle Object\r\n    if (values instanceof Object) {\r\n        copy = {};\r\n        for (const attr in values) {\r\n            if (values.hasOwnProperty(attr))\r\n                copy[attr] = deepClone(values[attr]);\r\n        }\r\n        return copy;\r\n    }\r\n    throw new Error(\"Unable to copy values! Its type isn't supported.\");\r\n}\r\n/**\r\n *\r\n * @desc   判断`obj`是否为空\r\n * @param  {Object} obj\r\n * @return {Boolean}\r\n */\r\nfunction isEmptyObject(obj) {\r\n    if (!obj || typeof obj !== \"object\" || Array.isArray(obj))\r\n        return false;\r\n    return !Object.keys(obj).length;\r\n}\r\n/**\r\n *\r\n * @desc 随机生成颜色\r\n * @return {String}\r\n */\r\nfunction randomColor() {\r\n    return `#${`00000${((Math.random() * 0x1000000) << 0).toString(16)}`.slice(-6)}`;\r\n}\r\n/**\r\n *\r\n * @desc 生成指定范围[min, max]的随机数\r\n * @param  {Number} min\r\n * @param  {Number} max\r\n * @return {Number}\r\n */\r\nfunction randomNum(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n/**\r\n *\r\n * @desc 判断是否为16进制颜色，rgb 或 rgba\r\n * @param  {String}  str\r\n * @return {Boolean}\r\n */\r\nfunction isColor(str) {\r\n    return /^(#([0-9a-fA-F]{3}){1,2}|[rR][gG][Bb](\\((\\s*(2[0-4]\\d|25[0-5]|[01]?\\d{1,2})\\s*,){2}\\s*(2[0-4]\\d|25[0-5]|[01]?\\d{1,2})\\s*\\)|[Aa]\\((\\s*(2[0-4]\\d|25[0-5]|[01]?\\d{1,2})\\s*,){3}\\s*([01]|0\\.\\d+)\\s*\\)))$/.test(str);\r\n}\r\n/**\r\n *\r\n * @desc   判断是否为邮箱地址\r\n * @param  {String}  str\r\n * @return {Boolean}\r\n */\r\nfunction isEmail(str) {\r\n    return /\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(str);\r\n}\r\n/**\r\n *\r\n * @desc  判断是否为身份证号\r\n * @param  {String|Number} str\r\n * @return {Boolean}\r\n */\r\nfunction isIdCard(str) {\r\n    return /^(^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$)|(^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])((\\d{4})|\\d{3}[Xx])$)$/.test(str);\r\n}\r\n/**\r\n *\r\n * @desc 判断是否为数字\r\n * @param  {Any}  obj\r\n * @return {Boolean}\r\n */\r\nfunction isNumber(obj) {\r\n    return (Object.prototype.toString.call(obj) === \"[object Number]\" && isFinite(obj));\r\n}\r\n/**\r\n *\r\n * @desc   判断是否为手机号\r\n * @param  {String|Number} str\r\n * @return {Boolean}\r\n */\r\nfunction isPhoneNum(str) {\r\n    return /^(\\+?0?86\\-?)?1[3456789]\\d{9}$/.test(str);\r\n}\r\n/**\r\n *\r\n * @desc   判断是否为URL地址\r\n * @param  {String} str\r\n * @return {Boolean}\r\n */\r\nfunction isUrl(str) {\r\n    return /[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/i.test(str);\r\n}\r\n/**\r\n *\r\n * @desc   现金额转大写\r\n * @param  {Number} n\r\n * @return {String}\r\n */\r\nfunction digitUppercase(n) {\r\n    const fraction = [\"角\", \"分\"];\r\n    const digit = [\"零\", \"壹\", \"贰\", \"叁\", \"肆\", \"伍\", \"陆\", \"柒\", \"捌\", \"玖\"];\r\n    const unit = [\r\n        [\"元\", \"万\", \"亿\"],\r\n        [\"\", \"拾\", \"佰\", \"仟\"]\r\n    ];\r\n    const head = n < 0 ? \"欠\" : \"\";\r\n    n = Math.abs(n);\r\n    let s = \"\";\r\n    for (let i = 0; i < fraction.length; i++) {\r\n        s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, \"\");\r\n    }\r\n    s = s || \"整\";\r\n    n = Math.floor(n);\r\n    for (let i = 0; i < unit[0].length && n > 0; i++) {\r\n        let p = \"\";\r\n        for (let j = 0; j < unit[1].length && n > 0; j++) {\r\n            p = digit[n % 10] + unit[1][j] + p;\r\n            n = Math.floor(n / 10);\r\n        }\r\n        s = p.replace(/(零.)*零$/, \"\").replace(/^$/, \"零\") + unit[0][i] + s;\r\n    }\r\n    return (head +\r\n        s\r\n            .replace(/(零.)*零元/, \"元\")\r\n            .replace(/(零.)+/g, \"零\")\r\n            .replace(/^整$/, \"零元整\"));\r\n}\r\n/**\r\n *\r\n * @desc 判断浏览器是否支持webP格式图片\r\n * @return {Boolean}\r\n */\r\nfunction isSupportWebP() {\r\n    return (!![].map &&\r\n        document\r\n            .createElement(\"canvas\")\r\n            .toDataURL(\"image/webp\")\r\n            .indexOf(\"data:image/webp\") == 0);\r\n}\r\n/**\r\n * @desc   格式化${startTime}距现在的已过时间\r\n * @param  {String} startTime\r\n * @return {String}\r\n */\r\nfunction formatPassTime(startTime) {\r\n    const aftertime = Date.parse(new Date(startTime).toISOString());\r\n    const currentTime = Date.parse(new Date().toISOString());\r\n    const time = currentTime - aftertime;\r\n    const day = parseInt(`${time / (1000 * 60 * 60 * 24)}`);\r\n    const hour = parseInt(`${time / (1000 * 60 * 60)}`);\r\n    const min = parseInt(`${time / (1000 * 60)}`);\r\n    const month = parseInt(`${day / 30}`);\r\n    const year = parseInt(`${month / 12}`);\r\n    if (year)\r\n        return `${year}年前`;\r\n    if (month)\r\n        return `${month}个月前`;\r\n    if (day)\r\n        return `${day}天前`;\r\n    if (hour)\r\n        return `${hour}小时前`;\r\n    if (min)\r\n        return `${min}分钟前`;\r\n    return \"刚刚\";\r\n}\r\n/**\r\n *\r\n * @desc   格式化现在距${endTime}的剩余时间\r\n * @param  {Date} endTime\r\n * @return {String}\r\n */\r\nfunction formatRemainTime(endTime) {\r\n    const startDate = new Date(); // 开始时间\r\n    const endDate = new Date(endTime); // 结束时间\r\n    const t = endDate.getTime() - startDate.getTime(); // 时间差\r\n    let d = 0;\r\n    let h = 0;\r\n    let m = 0;\r\n    let s = 0;\r\n    if (t >= 0) {\r\n        d = Math.floor(t / 1000 / 3600 / 24);\r\n        h = Math.floor((t / 1000 / 60 / 60) % 24);\r\n        m = Math.floor((t / 1000 / 60) % 60);\r\n        s = Math.floor((t / 1000) % 60);\r\n    }\r\n    return `${d}天 ${h}小时 ${m}分钟 ${s}秒`;\r\n}\r\n/**\r\n *\r\n * @desc 是否为闰年\r\n * @param {Number} year\r\n * @return {Boolean}\r\n */\r\nfunction isLeapYear(year) {\r\n    if (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @desc   判断是否为同一天\r\n * @param  {Date} date1\r\n * @param  {Date} date2 可选／默认值：当天\r\n * @return {Boolean}\r\n */\r\nfunction isSameDay(date1, date2) {\r\n    if (!date2) {\r\n        date2 = new Date();\r\n    }\r\n    const date1_year = date1.getFullYear();\r\n    const date1_month = date1.getMonth() + 1;\r\n    const date1_date = date1.getDate();\r\n    const date2_year = date2.getFullYear();\r\n    const date2_month = date2.getMonth() + 1;\r\n    const date2_date = date2.getDate();\r\n    return (date1_date === date2_date &&\r\n        date1_month === date2_month &&\r\n        date1_year === date2_year);\r\n}\r\n/**\r\n * @desc 获取指定日期月份的总天数\r\n * @param {Date} time\r\n * @return {Number}\r\n */\r\nfunction monthDays(date) {\r\n    const time = new Date(date);\r\n    const year = time.getFullYear();\r\n    const month = time.getMonth() + 1;\r\n    return new Date(year, month, 0).getDate();\r\n}\r\n/**\r\n * @desc ${startTime - endTime}的剩余时间,startTime大于endTime时，均返回0\r\n * @param { Date | String } startTime\r\n * @param { Date | String } endTime\r\n * @return { Object } { d, h, m, s } 天 时 分 秒\r\n */\r\nfunction timeLeft(startTime, endTime) {\r\n    if (!startTime || !endTime) {\r\n        return false;\r\n    }\r\n    let startDate;\r\n    let endDate;\r\n    if (startTime instanceof Date) {\r\n        startDate = startTime;\r\n    }\r\n    else {\r\n        startDate = new Date(startTime.replace(/-/g, \"/\")); // 开始时间\r\n    }\r\n    if (endTime instanceof Date) {\r\n        endDate = endTime;\r\n    }\r\n    else {\r\n        endDate = new Date(endTime.replace(/-/g, \"/\")); // 结束时间\r\n    }\r\n    const t = endDate.getTime() - startDate.getTime();\r\n    let d = 0;\r\n    let h = 0;\r\n    let m = 0;\r\n    let s = 0;\r\n    if (t >= 0) {\r\n        d = Math.floor(t / 1000 / 3600 / 24);\r\n        h = Math.floor((t / 1000 / 60 / 60) % 24);\r\n        m = Math.floor((t / 1000 / 60) % 60);\r\n        s = Math.floor((t / 1000) % 60);\r\n    }\r\n    return { d, h, m, s };\r\n}\r\n/**\r\n *\r\n * @desc   url参数转对象\r\n * @param  {String} url  default: window.location.href\r\n * @return {Object}\r\n */\r\nfunction parseQuery(query) {\r\n    query = !query ? window.location.href : query;\r\n    const queryWithoutStart = query.indexOf(\"?\") === 0 ? query.substring(1) : query;\r\n    const uaFormated = {};\r\n    const strs = queryWithoutStart.split(\"&\");\r\n    for (let querySingle in strs) {\r\n        uaFormated[querySingle.split(\"=\")[0]] = unescape(querySingle.split(\"=\")[1]);\r\n    }\r\n    return uaFormated;\r\n}\r\n/**\r\n *\r\n * @desc   对象序列化\r\n * @param  {Object} obj\r\n * @return {String}\r\n */\r\nfunction stringfyQueryString(obj) {\r\n    if (!obj)\r\n        return \"\";\r\n    const pairs = [];\r\n    for (const key in obj) {\r\n        const value = obj[key];\r\n        if (value instanceof Array) {\r\n            for (let i = 0; i < value.length; ++i) {\r\n                pairs.push(`${encodeURIComponent(`${key}[${i}]`)}=${encodeURIComponent(value[i])}`);\r\n            }\r\n            continue;\r\n        }\r\n        pairs.push(`${encodeURIComponent(key)}=${encodeURIComponent(obj[key])}`);\r\n    }\r\n    return pairs.join(\"&\");\r\n}\r\n/**\r\n * @description base64转blob\r\n * @param urlData base64编码\r\n */\r\nfunction convertBase64UrlToBlob(urlData) {\r\n    const arr = urlData.split(\",\");\r\n    const mime = arr[0].match(/:(.*?);/)[1];\r\n    const bstr = atob(arr[1]);\r\n    let n = bstr.length;\r\n    const u8arr = new Uint8Array(n);\r\n    while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new Blob([u8arr], { type: mime });\r\n}\r\n/**\r\n *\r\n * @desc   获取UUID\r\n * @return {String}\r\n */\r\nfunction getUUID() {\r\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\r\n        const r = (Math.random() * 16) | 0;\r\n        const v = c == \"x\" ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\r\n/**\r\n *\r\n * @desc   获取浏览器信息\r\n * @return  {Object} obj\r\n */\r\nfunction getBrowser() {\r\n    const Sys = { name: \"\", ver: \"\" };\r\n    const ua = navigator.userAgent.toLowerCase();\r\n    const re = /(msie|firefox|chrome|opera|version).*?([\\d.]+)/;\r\n    const m = ua.match(re);\r\n    if (!m) {\r\n        return {\r\n            Sys: {\r\n                name: \"\",\r\n                ver: \"\"\r\n            },\r\n            info: \"\"\r\n        };\r\n    }\r\n    Sys.name = m[1].replace(/version/, \"safari\");\r\n    Sys.ver = m[2];\r\n    return { Sys, info: ua };\r\n}\r\n/**\r\n *\r\n * @desc   获取系统名称和版本号\r\n * @return {String} example: mac68k win7\r\n */\r\nfunction checkOS() {\r\n    const sUserAgent = navigator.userAgent.toLowerCase();\r\n    const sPlatform = navigator.platform.toLowerCase();\r\n    const isWin = sPlatform === \"win32\" || sPlatform === \"windows\";\r\n    const isMac = sPlatform === \"mac68k\" ||\r\n        sPlatform === \"macppc\" ||\r\n        sPlatform === \"macintosh\" ||\r\n        sPlatform === \"macintel\";\r\n    const isUnix = sPlatform === \"x11\" && !isWin && !isMac;\r\n    const isLinux = String(sPlatform).indexOf(\"linux\") > -1;\r\n    if (isMac)\r\n        return \"MAC\";\r\n    if (isUnix)\r\n        return \"Unix\";\r\n    if (isLinux)\r\n        return \"Linux\";\r\n    if (isWin) {\r\n        const isWin2K = sUserAgent.indexOf(\"windows nt 5.0\") > -1 ||\r\n            sUserAgent.indexOf(\"windows 2000\") > -1;\r\n        if (isWin2K)\r\n            return \"Win2000\";\r\n        const isWinXP = sUserAgent.indexOf(\"windows nt 5.1\") > -1 ||\r\n            sUserAgent.indexOf(\"windows xp\") > -1;\r\n        if (isWinXP)\r\n            return \"WinXP\";\r\n        const isWin2003 = sUserAgent.indexOf(\"windows nt 5.2\") > -1 ||\r\n            sUserAgent.indexOf(\"windows 2003\") > -1;\r\n        if (isWin2003)\r\n            return \"Win2003\";\r\n        const isWinVista = sUserAgent.indexOf(\"windows nt 6.0\") > -1 ||\r\n            sUserAgent.indexOf(\"windows vista\") > -1;\r\n        if (isWinVista)\r\n            return \"WinVista\";\r\n        const isWin7 = sUserAgent.indexOf(\"windows nt 6.1\") > -1 ||\r\n            sUserAgent.indexOf(\"windows 7\") > -1;\r\n        if (isWin7)\r\n            return \"Win7\";\r\n        const isWin8 = sUserAgent.indexOf(\"windows nt 6.2\") > -1 ||\r\n            sUserAgent.indexOf(\"windows nt 6.3\") > -1 ||\r\n            sUserAgent.indexOf(\"windows 8\") > -1;\r\n        if (isWin8)\r\n            return \"Win8\";\r\n        const isWin10 = sUserAgent.indexOf(\"windows nt 10\") > -1 ||\r\n            sUserAgent.indexOf(\"windows 10\") > -1;\r\n        if (isWin10)\r\n            return \"Win10\";\r\n    }\r\n    return \"other\";\r\n}\r\n/**\r\n *\r\n * @desc   从sessionStorage获取UserId，如无根据ISO时间戳生成\r\n * @return {String}\r\n */\r\nfunction getUserId() {\r\n    const userId = sessionStorage.getItem(\"userId\");\r\n    if (userId) {\r\n        return userId;\r\n    }\r\n    const temp = (Date.parse(new Date().toISOString()) % 100000000) / 1000;\r\n    const userIdTemp = `${Number.parseInt(temp)}`;\r\n    sessionStorage.setItem(\"userId\", userIdTemp);\r\n    return userIdTemp;\r\n}\r\n/**\r\n *\r\n * @desc   获取Mac系统版本\r\n * @return {String}\r\n */\r\nfunction getMacOsVersion() {\r\n    return navigator.userAgent.substr(navigator.userAgent.indexOf(\"OS X\") + 5, navigator.userAgent\r\n        .substr(navigator.userAgent.indexOf(\"OS X\") + 5)\r\n        .indexOf(\")\"));\r\n}\r\n/**\r\n *\r\n * @desc   给要加载的js文件添加属性，比如Tag\r\n * @return {HTMLScriptElement}\r\n */\r\nconst buildScriptTag = (src, attrs) => {\r\n    const script = document.createElement('script');\r\n    script.type = 'text/javascript';\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.src = src;\r\n    for (let attr in Object.keys(attrs)) {\r\n        script.setAttribute(attr, attrs[attr]);\r\n    }\r\n    return script;\r\n};\r\n/**\r\n * @desc    异步加载script\r\n */\r\nfunction loadScript(url, attrs = {}) {\r\n    const script = buildScriptTag(url, attrs);\r\n    const p = new Promise((resolve, reject) => {\r\n        script.onload = () => {\r\n            resolve();\r\n        };\r\n        script.onerror = () => {\r\n            reject();\r\n        };\r\n    });\r\n    document.body.appendChild(script);\r\n    return p;\r\n}\r\nconst uaParsed = navigator ? parseQuery(navigator.userAgent) : {};\r\n/**\r\n * @desc    系统信息判断获取\r\n */\r\nconst platform = {\r\n    /**\r\n     * 是否为mobile\r\n     */\r\n    mobile: typeof navigator !== 'undefined' &&\r\n        /(Android|iPhone|SymbianOS|Windows\\ Phone|iPad|iPod)/i.test(navigator.userAgent),\r\n    /**\r\n     * 是否为ios\r\n     */\r\n    ios: typeof navigator !== 'undefined' && /(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent),\r\n    /**\r\n     * 是否为android\r\n     */\r\n    android: typeof navigator !== 'undefined' && /(Android)/i.test(navigator.userAgent),\r\n    /**\r\n     * 是否为微信webview\r\n     */\r\n    weixinwebview: typeof navigator !== 'undefined' && /MicroMessenger/i.test(navigator.userAgent),\r\n    /**\r\n     * 是否为微信小程序\r\n     */\r\n    miniprogram: typeof wx !== 'undefined' && typeof wx.getSystemInfo !== 'undefined',\r\n    /**\r\n     * 是否为美术宝一对一app\r\n     */\r\n    msb1v1app: typeof navigator !== 'undefined' &&\r\n        typeof uaParsed.ua !== 'undefined' &&\r\n        (uaParsed.ua.includes('ydy') || uaParsed.ua.includes('vwb')),\r\n};\n\nexport { addClass, arrayEqual, checkOS, convertBase64UrlToBlob, debounce, deepClone, digitUppercase, formatPassTime, formatPos, formatRemainTime, getBrowser, getCookie, getEle, getExplore, getKeyName, getMacOsVersion, getOS, getScrollTop, getUId, getUUID, getUserId, hasClass, isColor, isEmail, isEmptyObject, isIdCard, isLeapYear, isNumber, isPhoneNum, isSameDay, isSupportWebP, isUrl, loadScript, monthDays, now, offset, parseQuery, platform, randomColor, randomNum, removeClass, removeCookie, scrollTo, setCookie, setScrollTop, stringfyQueryString, throttle, timeLeft, windowResize };\n//# sourceMappingURL=index.js.map\n","const boardEventList = [\n    'object:modified',\n    'object:rotated',\n    'object:scaled',\n    'object:moved',\n    'object:skewed',\n    'object:rotating',\n    'object:scaling',\n    'object:moving',\n    'object:skewing',\n    'before:transform',\n    'before:selection:cleared',\n    'selection:cleared',\n    'selection:updated',\n    'selection:created',\n    'path:created',\n    'mouse:down',\n    'mouse:move',\n    'mouse:up',\n    'mouse:down:before',\n    'mouse:move:before',\n    'mouse:up:before',\n    'mouse:over',\n    'mouse:out',\n    'mouse:dblclick',\n    'event:dragover',\n    'event:dragenter',\n    'event:dragleave',\n    'event:drop',\n    'object:added',\n    'object:removed',\n];\n\nexport default {\n    boardEventList,\n};\n","// import { ICanvas } from \"./interface\";\nimport { fabric } from \"fabric\";\nimport { getEle, getUId } from \"@msb/utils\";\n// const fCanvas = fabric.Canvas;\n// console.log(\"fabric\", fabric);\ntype Option = {};\n\n/**\n * 增强canvas的能力\n * 支持 选择器\n * 删除对 ID的支持\n * 增强背景类型\n * 支持销毁实例\n * TODO: 需要验证自定义类对cache的影响\n * TODO: 需要根据实际情况，完善方法\n * \n */\n\nclass Canvas extends fabric.Canvas {\n  public options: any;\n  public cvsId: String;\n  viewportTransform: any;\n  freeDrawingBrush: any;\n  clipPath: any;\n  ele: Element | string;\n  constructor(ele , options: Option) {\n    super(getEle(ele), options);\n    this.options = {\n      ...options\n    };\n    this.ele = ele;\n    this.cvsId = getUId();\n  }\n\n  destory(): void {\n    this.dispose();\n  }\n}\n\nexport default Canvas;\n","enum DRAW_TYPE {\n    UNKNOWEN = 0,\n    CIRCLE = 1,\n    RECT = 2,\n    FREE = 3,\n    PATH = 4,\n    IMAGE = 5,\n    TEXT = 6,\n    ITEXT = 7,\n    ELLIPSE = 8,\n    LINE = 9,\n    POINT = 10,\n    POINT_LINE = 11,\n    POLYHON = 12,\n    POLY_LINE = 13,\n    TEXT_BOX = 14,\n    TRIANGLE = 15,\n    SELECT = 16,\n    DELETE = 17,\n    CLIP = 18,\n}\n\nconst klassMap: { [key: string]: string } = {\n    '1': 'Circle',\n    '2': 'Rect',\n    '3': 'Path',\n    '4': 'Path',\n    '5': 'Image',\n};\n\nconst getFabricClass = (val: string | number) => {\n    let inputVal = '';\n    if (typeof val !== 'string') {\n        inputVal = `${val}`;\n    } else {\n        inputVal = val;\n    }\n    return klassMap[inputVal];\n};\n\n/**\n * 根据当前值获取绘制类型\n *\n * @param {number} val\n * @returns\n */\nconst getDrawTypeByVal = (val: string) => {\n    if (!val) {\n        return [];\n    }\n    const result: string[] = [];\n    Object.keys(DRAW_TYPE).forEach(member => {\n        if (DRAW_TYPE[member] === val) {\n            result.push(member);\n        }\n    });\n    // for (const member in DRAW_TYPE) {\n    //     if (DRAW_TYPE[member] === val) {\n    //         result.push(member);\n    //     }\n    // }\n    return result;\n};\n\n/**\n * 检测当前绘制类型是否合法\n *\n * @param {number} drawType\n * @returns {boolean}\n */\nconst checkDrawType = (drawType: string) => {\n    if (getDrawTypeByVal(drawType).length < 1) {\n        return false;\n    }\n    return true;\n};\n\nexport { DRAW_TYPE, getDrawTypeByVal, checkDrawType, getFabricClass };\n\nexport default DRAW_TYPE;\n","/**\n * 绘制的基础类，类似一个接口，因为ES 7并不支持接口，后续可以使用Typescript 来实现\n * 该类只是定义了\n *\n *\n *\n * @class Draw\n */\n\nimport { IBoard, IDrawController, ICanvas } from '../interface';\n\nabstract class DrawContoller implements IDrawController {\n    public canvas: ICanvas;\n\n    public name: string;\n\n    public drawIns: IBoard;\n\n    constructor(canvas, drawIns) {\n        if (!canvas) {\n            throw new Error('drawContoll: 需要参数 canvas');\n        }\n        this.canvas = canvas;\n        this.name = 'DrawContoller';\n        this.drawIns = drawIns;\n    }\n\n    prepareDraw() {\n        this.canvas.skipTargetFind = true; // 画板元素不能被选中\n        this.canvas.selection = false;\n        this.canvas.isDrawingMode = false;\n    }\n\n    prepareSelect() {\n        this.canvas.selection = true;\n        this.canvas.skipTargetFind = false;\n        this.canvas.selectable = true;\n        this.canvas.isDrawingMode = false;\n    }\n\n    startDraw() {}\n\n    draw() {}\n\n    endDraw() {}\n\n    initEvent() {}\n\n    teardownEvent() {}\n\n    pathCreated(currentPath?: any) {\n        console.log('DrawContoller pathCreated call:', currentPath);\n    }\n}\n\nexport default DrawContoller;\n","import { IFreeDrawController } from '../interface';\nimport DrawContoller from './DrawController';\n\nimport * as util from '@msb/utils';\nimport {DRAW_TYPE} from '../config/drawType';\nimport {fabric} from 'fabric';\n\nclass FreeDrawController extends DrawContoller implements IFreeDrawController {\n    constructor(canvas, drawIns) {\n        super(canvas, drawIns);\n        this.name = 'FreeDrawController';\n        this.startDraw = this.startDraw.bind(this);\n        this.endDraw = this.endDraw.bind(this);\n    }\n\n    setPenWidth(width) {\n        if (!util.isNumber(width)) {\n            return;\n        }\n        this.canvas.freeDrawingBrush.width = width;\n    }\n\n    setPenColor(color) {\n        const colorVal = new fabric.Color(color).getSource();//util.getColorSource(color);\n        if (!colorVal) {\n            console.warn('传入的颜色格式不正确: ', color);\n            return;\n        }\n        this.canvas.freeDrawingBrush.color = color;\n    }\n\n    getPenWidth() {\n        return this.canvas.freeDrawingBrush.width;\n    }\n\n    getPenColor() {\n        return this.canvas.freeDrawingBrush.color;\n    }\n\n    startDraw() {\n        this.canvas.isDrawingMode = true;\n    }\n\n    endDraw() {\n        this.canvas.isDrawingMode = false;\n    }\n\n    initEvent() {\n        this.drawIns.on(`typeChange:${DRAW_TYPE.FREE}`, this.startDraw);\n    }\n\n    teardownEvent() {\n        this.drawIns.removeListener(`typeChange:${DRAW_TYPE.FREE}`, this.startDraw);\n    }\n}\n\nexport default FreeDrawController;\n","import { fabric } from 'fabric';\nimport DrawContoll from './DrawController';\nimport * as util from '@msb/utils';\nimport { DRAW_TYPE } from '../config/drawType';\n\nclass CircleDrawController extends DrawContoll {\n    public startPos: {\n        x: number;\n        y: number;\n    };\n\n    public endPos: {\n        x: number;\n        y: number;\n    };\n\n    public currentDrawn: any;\n\n    public stroke: string;\n\n    public fill: string;\n\n    public strokeWidth: number;\n\n    public collections: any[];\n\n    public isStartDraw: boolean;\n\n    constructor(canvas, board) {\n        super(canvas, board);\n        this.name = 'CircleDrawController';\n        this.startPos = {\n            x: 0,\n            y: 0,\n        };\n        this.endPos = {\n            x: 0,\n            y: 0,\n        };\n        this.currentDrawn = null;\n        this.stroke = '';\n        this.fill = '';\n        this.strokeWidth = 1;\n        this.collections = [];\n        this.isStartDraw = false;\n\n        this.onSelected = this.onSelected.bind(this);\n        this.onStartDraw = this.onStartDraw.bind(this);\n        this.onDraw = this.onDraw.bind(this);\n        this.onEndDraw = this.onEndDraw.bind(this);\n    }\n\n    startDraw(pos?: any) {\n        if (!pos) {\n            return;\n        }\n        this.startPos = {\n            x: pos.x,\n            y: pos.y,\n        };\n    }\n\n    drawCircle() {\n        if (this.currentDrawn) {\n            this.canvas.remove(this.currentDrawn);\n            this.currentDrawn = null;\n        }\n        const left = this.startPos.x;\n        const top = this.startPos.y;\n        const radius =\n            Math.sqrt(Math.pow(this.endPos.x - left, 2) + Math.pow(this.endPos.y - top, 2)) / 2;\n        // eslint-disable-next-line no-undef\n        this.currentDrawn = new fabric.Circle({\n            left,\n            top,\n            stroke: 'red',\n            fill: this.fill,\n            radius,\n            strokeWidth: this.strokeWidth,\n        });\n\n        this.currentDrawn.set('originX', this.endPos.x - left < 0 ? 'right' : 'left');\n        this.currentDrawn.set('originY', this.endPos.y - top < 0 ? 'bottom' : 'top');\n\n        this.canvas.add(this.currentDrawn);\n        this.canvas.renderAll();\n    }\n\n    draw(pos?: any) {\n        this.endPos.x = pos.x;\n        this.endPos.y = pos.y;\n        this.drawCircle();\n    }\n\n    endDraw(pos?: any) {\n        this.draw(pos);\n        this.collections.push(this.currentDrawn);\n        this.currentDrawn = null;\n    }\n\n    onSelected() {\n        this.prepareDraw();\n    }\n\n    onStartDraw(evt) {\n        const pos = util.formatPos(evt.pointer.x, evt.pointer.y);\n        this.isStartDraw = true;\n        this.startDraw(pos);\n    }\n\n    onDraw(evt) {\n        if (!this.isStartDraw) {\n            return;\n        }\n        const pos = util.formatPos(evt.pointer.x, evt.pointer.y);\n        this.draw(pos);\n    }\n\n    onEndDraw(evt) {\n        const pos = util.formatPos(evt.pointer.x, evt.pointer.y);\n        this.isStartDraw = false;\n        // this.drawInfo.x = pos.x;\n        // this.drawInfo.y = pos.y;\n        // if (!this.currentDrawControll) {\n        //     return;\n        // }\n        this.endDraw(pos);\n    }\n\n    initEvent() {\n        this.canvas.on('mouse:down', this.onStartDraw);\n        this.canvas.on('mouse:move', this.onDraw);\n        this.canvas.on('mouse:up', this.onEndDraw);\n\n        this.drawIns.on(`typeChange:${DRAW_TYPE.CIRCLE}`, this.onSelected);\n    }\n\n    teardownEvent() {\n        this.canvas.off('mouse:down', this.onStartDraw);\n        this.canvas.off('mouse:move', this.onDraw);\n        this.canvas.off('mouse:up', this.onEndDraw);\n\n        this.drawIns.removeListener(`typeChange:${DRAW_TYPE.CIRCLE}`, this.onSelected);\n    }\n\n    setStokeColor() { }\n\n    setFillColor() { }\n\n    setStrokeWidth() { }\n\n    getAllCircles() { }\n\n    remove() { }\n}\n\nexport default CircleDrawController;\n","import DrawContoller from './DrawController';\nimport {DRAW_TYPE} from '../config/drawType';\n\nclass DeleteDrawController extends DrawContoller {\n    public beforeDelete: (obj?: any) => boolean;\n\n    constructor(canvas, board) {\n        super(canvas, board);\n        this.name = 'DeleteDrawController';\n        this.endDraw = this.endDraw.bind(this);\n        this.onSelected = this.onSelected.bind(this);\n        const opts = {\n            beforeDelete: () => {},\n            ...this.drawIns.board.options.deleteOpts,\n        };\n        this.beforeDelete = opts.beforeDelete || (() => {});\n    }\n\n    endDraw() {\n        const currentSelects = this.canvas.getActiveObjects();\n        // TODO: 存在性能问题，需要优化\n        currentSelects.forEach(v => {\n            if (this.beforeDelete(v) === false) {\n                return;\n            }\n            this.canvas.remove(v);\n        });\n        this.canvas.discardActiveObject();//'delete:select'\n        console.log('结束绘制:', currentSelects);\n    }\n\n    onSelected() {\n        this.prepareSelect();\n    }\n\n    initEvent() {\n        this.canvas.on('mouse:up', this.endDraw);\n        this.drawIns.on(`typeChange:${DRAW_TYPE.DELETE}`, this.onSelected);\n    }\n\n    teardownEvent() {\n        this.canvas.off('mouse:up', this.endDraw);\n        this.drawIns.removeListener(`typeChange:${DRAW_TYPE.DELETE}`, this.onSelected);\n    }\n}\n\nexport default DeleteDrawController;\n","import DrawContoller from './DrawController';\n\nexport default class DefaultDrawController extends DrawContoller {}\n","import DrawContoller from './DrawController';\nimport { fabric } from \"fabric\";\nimport * as util from '@msb/utils';\n\n// eslint-disable-next-line no-undef\n// const { Color } = fabric;\n\nclass ClipDrawController extends DrawContoller {\n    public isEnable: boolean;\n\n    constructor(canvas, board) {\n        super(canvas, board);\n        this.name = 'ClipDrawController';\n        this.isEnable = false;\n        this.pathCreated = this.pathCreated.bind(this);\n    }\n\n    setPenWidth(width) {\n        if (!util.isNumber(width)) {\n            return;\n        }\n        this.canvas.freeDrawingBrush.width = width;\n    }\n\n    setPenColor(color) {\n        const colorVal = new fabric.Color(color).getSource();//util.getColorSource(color)\n        if (!colorVal) {\n            console.warn('传入的颜色格式不正确: ', color);\n            return;\n        }\n        // const colorSource = new Color(color);\n        // const hexColor = colorSource.toHexa();\n        this.canvas.freeDrawingBrush.color = color;\n    }\n\n    startDraw() {\n        this.canvas.isDrawingMode = true;\n        this.isEnable = true;\n    }\n\n    endDraw() {\n        this.canvas.isDrawingMode = false;\n        this.isEnable = false;\n    }\n\n    pathCreated(currentPath) {\n        if (!this.isEnable) {\n            return;\n        }\n        this.canvas.clipPath = currentPath.path;\n        this.canvas.drawClipPathOnCanvas(this.canvas.getContext());\n    }\n}\n\nexport default ClipDrawController;\n","import DrawContoller from './DrawController';\nimport {DRAW_TYPE} from '../config/drawType';\n\nclass SelectDrawController extends DrawContoller {\n    constructor(canvas, drawIns) {\n        super(canvas, drawIns);\n        this.name = 'SelectDrawController';\n        this.onSelected = this.onSelected.bind(this);\n    }\n\n    onSelected() {\n        this.prepareSelect();\n    }\n\n    initEvent() {\n        this.drawIns.on(`typeChange:${DRAW_TYPE.SELECT}`, this.onSelected);\n    }\n\n    teardownEvent() {\n        this.drawIns.removeListener(`typeChange:${DRAW_TYPE.SELECT}`, this.onSelected);\n    }\n}\n\nexport default SelectDrawController;\n","import { EventEmitter } from 'events';\nimport DRAW_TYPE, { checkDrawType } from './config/drawType';\n\nimport * as util from '@msb/utils';\nimport FreeDrawController from './controllers/FreeDrawController';\nimport CircleDrawController from './controllers/CircleDrawController';\nimport DeleteDrawController from './controllers/DeleteDrawController';\n// import DrawController from './controllers/DrawController';\nimport DefaultDrawController from './controllers/DefaultDrawController';\nimport ClipDrawController from './controllers/ClipDrawController';\nimport SelectDrawController from './controllers/SelectDrawController';\n\nimport {\n    IBoard,\n    ICanvas,\n    IFreeDrawController,\n    ICircleDrawController,\n    IDeleteDrawController,\n    IClipDrawController,\n    ISelectDrawController,\n    IDrawController,\n} from './interface';\n\ntype Size = {\n    x: number;\n    y: number;\n};\n\nexport interface IMouseDraw {\n    drawType: DRAW_TYPE;\n    preDrawType: DRAW_TYPE;\n    drawInfo: Partial<Size>;\n    freeDrawControll: IFreeDrawController;\n\n    // circleDrawControll: ICircleDrawController;\n    // deleteDrawController: IDeleteDrawController;\n    // clipDrawController: IClipDrawController;\n    // selectDrawController: ISelectDrawController;\n    // defaultController: IDrawController;\n    // currentDrawControll: IDrawController;\n    // preDrawController: IDrawController;\n    updateDrawType: (type: string) => void;\n}\n\n/**\n * 鼠标绘制，单独出来是想确保在 Board 初始化阶段可以很容易的配置进行，比如当开发者\n * 不想使用鼠标绘制的时候，可以很容易的移除，如果混合在Board内的话对这些操作就会很麻烦\n *\n * @class MouseDraw\n */\nclass MouseDraw extends EventEmitter {\n    public drawType: DRAW_TYPE;\n\n    public preDrawType: DRAW_TYPE;\n\n    public drawInfo: Size;\n\n    public drawCanvas: ICanvas;\n\n    public isStartDraw: boolean;\n\n    public board: IBoard;\n\n    public currentDraw: null;\n\n    public freeDrawControll: IFreeDrawController;\n\n    public circleDrawControll: ICircleDrawController;\n\n    public deleteDrawController: IDeleteDrawController;\n\n    public clipDrawController: IClipDrawController;\n\n    public selectDrawController: ISelectDrawController;\n\n    public defaultController: IDrawController;\n\n    public currentDrawControll: IDrawController;\n\n    public preDrawController: IDrawController;\n\n    constructor(drawCanvas, board) {\n        super();\n        this.drawType = DRAW_TYPE.UNKNOWEN;\n        this.preDrawType = DRAW_TYPE.UNKNOWEN;\n        this.drawInfo = {\n            x: 0,\n            y: 0,\n        };\n        this.drawCanvas = drawCanvas;\n        this.board = board;\n        this.isStartDraw = false;\n        this.currentDraw = null;\n\n        // TODO：可以做delay init\n        this.freeDrawControll = new FreeDrawController(this.drawCanvas, this);\n        this.circleDrawControll = new CircleDrawController(this.drawCanvas, this);\n        this.deleteDrawController = new DeleteDrawController(this.drawCanvas, this);\n        this.clipDrawController = new ClipDrawController(this.drawCanvas, this);\n        this.selectDrawController = new SelectDrawController(this.drawCanvas, this);\n        this.defaultController = new DefaultDrawController(this.drawCanvas, this);\n\n        // 默认为空控制器，为了做一下默认操作\n        this.currentDrawControll = this.defaultController;\n        this.preDrawController = this.defaultController;\n\n        this.startDraw = this.startDraw.bind(this);\n        this.draw = this.draw.bind(this);\n        this.endDraw = this.endDraw.bind(this);\n    }\n\n    _bindEvent() {\n        // TODO：优化事件绑定\n        if (this.drawType === DRAW_TYPE.CLIP) {\n            this.drawCanvas.on('path:created', this.currentDrawControll.pathCreated);\n            return;\n        }\n        this.currentDrawControll.initEvent();\n    }\n\n    _debindEvent() {\n        // remove all, 会议除所有的事件绑定，造成难以追踪的bug\n        // this.drawCanvas.removeListeners();\n        // TODO：优化事件绑定\n        if (this.preDrawType === DRAW_TYPE.CLIP) {\n            this.drawCanvas.off('path:created', this.currentDrawControll.pathCreated);\n            this.preDrawController.endDraw();\n        }\n        this.preDrawController.teardownEvent();\n    }\n\n    _execDrawAction() {\n        this.preDrawController = this.currentDrawControll;\n        this.currentDrawControll = this.getContollByType();\n\n        // 可以合二为一\n        // 移除老的事件绑定\n        this._debindEvent();\n        // 添加新的事件绑定\n        this._bindEvent();\n\n        // if (type === DRAW_TYPE.FREE) {\n        //     this.freeDrawControll.startDraw();\n        // } else if (type === DRAW_TYPE.SELECT) {\n        //     this.currentDrawControll.prepareSelect();\n        //     // this._debindEvent();\n        // } else if (type === DRAW_TYPE.CLIP) {\n        //     // TODO: 优化获取controller的方式\n        //     // this.currentDrawControll.prepareSelect();\n        //     this.currentDrawControll.startDraw();\n        //     this._bindEvent();\n        //     // this._debindEvent();\n        // } else if (type === DRAW_TYPE.DELETE) {\n        //     // this.currentDrawControll = this.getContollByType(this.drawType);\n        //     this.currentDrawControll.prepareSelect();\n        //     this._bindEvent();\n        //     // this._debindEvent();\n        // } else {\n        //     // this.currentDrawControll = this.getContollByType(this.drawType);\n        //     this.currentDrawControll.prepareDraw();\n        //     this._bindEvent();\n        // }\n    }\n\n    updateDrawType(type) {\n        if (!checkDrawType(type)) {\n            return;\n        }\n        this.preDrawType = this.drawType;\n        this.drawType = type;\n        this._execDrawAction();\n\n        // must aftter bind event\n        this.emit(`typeChange:${type}`, {\n            preType: this.drawType,\n            currType: type,\n        });\n\n        this.emit('typeChange', {\n            preType: this.drawType,\n            currType: type,\n        });\n    }\n\n    getContollByType() {\n        switch (this.drawType) {\n            case DRAW_TYPE.CIRCLE:\n                return this.circleDrawControll;\n            case DRAW_TYPE.DELETE:\n                return this.deleteDrawController;\n            case DRAW_TYPE.CLIP:\n                return this.clipDrawController;\n            case DRAW_TYPE.FREE:\n                return this.freeDrawControll;\n            case DRAW_TYPE.SELECT:\n                return this.selectDrawController;\n            default:\n                return this.defaultController;\n        }\n    }\n\n    startDraw(evt) {\n        const pos = util.formatPos(evt.pointer.x, evt.pointer.y);\n        this.isStartDraw = true;\n        this.drawInfo.x = pos.x;\n        this.drawInfo.y = pos.y;\n        if (!this.currentDrawControll) {\n            return;\n        }\n        this.currentDrawControll.startDraw(pos);\n    }\n\n    draw(evt) {\n        if (!this.isStartDraw) {\n            return;\n        }\n        const pos = util.formatPos(evt.pointer.x, evt.pointer.y);\n        this.drawInfo.x = pos.x;\n        this.drawInfo.y = pos.y;\n        if (!this.currentDrawControll) {\n            return;\n        }\n        this.currentDrawControll.draw(pos);\n    }\n\n    endDraw(evt) {\n        const pos = util.formatPos(evt.pointer.x, evt.pointer.y);\n        this.isStartDraw = false;\n        this.drawInfo.x = pos.x;\n        this.drawInfo.y = pos.y;\n        if (!this.currentDrawControll) {\n            return;\n        }\n        this.currentDrawControll.endDraw(pos);\n    }\n}\n\nexport default MouseDraw;\n","import { fabric } from 'fabric';\nimport { EventEmitter } from 'events';\n// import { ICanvas } from './interface';\nimport * as util from '@msb/utils';\nimport config from './config/config';\nimport Canvas from './canvas';\nimport DRAW_TYPE, { checkDrawType, getFabricClass } from './config/drawType';\nimport MouseDraw, { IMouseDraw } from './MouseDraw';\n\ntype Option = Partial<{\n    width: number;\n    height: number;\n    backgroundColor: string;\n    overlayImage: string;\n    overlayColor: string;\n    backgroundImage: string;\n    selection: boolean;\n    enableRetinaScaling: boolean;\n    canvas: string | Element;\n    deleteOpts: {\n        beforeDelete: () => void;\n    };\n}>;\n\ntype Size = {\n    width: number | undefined;\n    height: number | undefined;\n};\n\n/**\n * @description Board 是整个程序入口，用来初始化程序，给外部提供修改配置的接口，对外部暴露项目状态。\n * 项目中只用来，初始化项目，参数校验，对外部提供接口，对外部暴露状态\n *\n * 第一版实现，只提供接口，不对外提供控制组件等相关的UI\n *\n */\nclass Board extends EventEmitter {\n    public options: Option;\n\n    public canvas: string | Element;\n\n    public size: Size;\n\n    public isStartDraw: boolean;\n\n    public drawType: DRAW_TYPE;\n\n    public fCanvas: any;\n\n    public mouseDraw: IMouseDraw;\n\n    public collections: any[];\n\n    public historyIdx: number;\n\n    public static DRAW_TYPE = DRAW_TYPE;\n\n    public static util = util;\n\n    /**\n     * Creates an instance of Board.\n     * @param {*} 初始化参与定义 {\n     *  canvas: string(css-selector | id) | htmlElement 用来渲染\n     *  width: number 宽 可以用来覆盖默认宽\n     *  height: number 高 可以用来覆盖默认高\n     *  backgroundColor: string 背景颜色\n     *  overlayImage: string 遮罩图片\n     *  backgroundImage: sting 背景图片\n     *  overlayColor: string 遮罩层颜色\n     *\n     * }\n     * @memberof Board\n     */\n    constructor(options: Option) {\n        super();\n        this.options = {\n            width: 0,\n            height: 0,\n            backgroundColor: '',\n            overlayImage: '',\n            overlayColor: '',\n            backgroundImage: '',\n            selection: true,\n            enableRetinaScaling: false,\n            deleteOpts: {\n                beforeDelete: () => {},\n            },\n            ...options,\n        };\n        if (!this.options.canvas) {\n            throw new Error('需要传入canvas id，或者 canvas 元素');\n        }\n        this.canvas = this.options.canvas;\n        this.size = {\n            width: this.options.width,\n            height: this.options.height,\n        };\n        this.drawType = DRAW_TYPE.UNKNOWEN;\n        this.isStartDraw = false;\n        this.fCanvas = this._initCanvas();\n        this.mouseDraw = new MouseDraw(this.fCanvas, this);\n        // 添加当前集合对象指向画布添加的对象\n        this.collections = [];\n        this.historyIdx = this.collections.length;\n        // TODO: 后续需要改成根据场景进行绑定\n        // this._bindEvent();\n    }\n\n    _initCanvas() {\n        const fCanvas = new Canvas(this.canvas, {\n            width: this.size.width,\n            height: this.size.height,\n            backgroundColor: this.options.backgroundColor,\n            overlayColor: this.options.overlayColor,\n            overlayImage: this.options.overlayImage,\n            backgroundImage: this.options.backgroundImage,\n            enableRetinaScaling: this.options.enableRetinaScaling,\n        });\n        // this.fCanvas = fCanvas;\n        fCanvas.selection = this.options.selection as boolean;\n        this._initEvent();\n        this._exporseEvent();\n        return fCanvas;\n    }\n\n    // TODO: 绑定事件能否做成根据不同场景进行绑定，没有场景移除事件，性能考虑\n    _initEvent() {\n        // this.fCanvas.off('mouse:down', this.mouseDraw.startDraw);\n        // this.fCanvas.off('mouse:move', this.mouseDraw.draw);\n        // this.fCanvas.off('mouse:up', this.mouseDraw.endDraw);\n\n        // 扩展\n        this.fCanvas.on('object:added', evt => {\n            if (!evt.target) {\n                return;\n            }\n            if (!evt.target.get('__msb_id')) {\n                evt.target.set('__msb_id', util.getUId());\n            }\n        });\n    }\n\n    /**\n     * 对外暴露所有事件\n     *\n     * @memberof Board\n     */\n    _exporseEvent() {\n        config.boardEventList.forEach(v => {\n            this.fCanvas.on(v, (...args) => {\n                this.emit(v, ...args);\n            });\n        });\n    }\n\n    /**\n     * 移除绑定的事件\n     *\n     * @param {string} evtName\n     * @param {function} listeners\n     * @memberof Board\n     */\n    _dexporseEvent(evtName, listeners) {\n        this.removeListener(evtName, listeners);\n    }\n\n    setBackgroundColor(color) {\n        this.fCanvas.setBackgroundColor(color, function(){});\n        this.fCanvas.renderAll();\n    }\n\n    setOverlayColor(color) {\n        this.fCanvas.setOverlayColor(color, function(){});\n        this.fCanvas.renderAll();\n    }\n\n    // 用来做实时绘制\n    createPencil() {\n        return new fabric.PencilBrush();\n    }\n\n    // 创建path\n    createPath(paths) {\n        return new fabric.Path(paths);\n    }\n\n    createPoint(point) {\n        const p = {\n            x: 0,\n            y: 0,\n            ...point,\n        };\n        return new fabric.Point(p.x, p.y);\n    }\n\n    // 更新当前配置\n    setWidth(width) {\n        if (typeof width !== 'number') {\n            return;\n        }\n        this.fCanvas.setWidth(width);\n    }\n\n    // 更新当前配置\n    setHeight(height) {\n        if (typeof height !== 'number') {\n            return;\n        }\n        this.fCanvas.setHeight(height);\n    }\n\n    // 禁用 canvas 交互\n    diableInteractive() {\n        // 创建一个div\n        // this.fCanvas.set('interactive', isInteractive);\n    }\n\n    /**\n     * 取消选中\n     *\n     * @param {*} e 事件对象，默认课不传\n     * @memberof Board\n     */\n    discardActiveObject(e) {\n        this.fCanvas.discardActiveObject(e);\n        this.fCanvas.requestRenderAll();\n    }\n\n    /**\n     * 根据id 获取 object\n     *\n     * @param {*} id\n     * @returns\n     * @memberof Board\n     */\n    findIndexById(id) {\n        let idx = -1;\n        this.fCanvas.forEachObject((v, i) => {\n            if (v && v.__msb_id === id) {\n                idx = i;\n            }\n        });\n        return idx;\n    }\n\n    /**\n     * 根据id 获取 object\n     *\n     * @param {*} id\n     * @returns\n     * @memberof Board\n     */\n    findObjectById(id) {\n        let res = null;\n        this.fCanvas.forEachObject(v => {\n            if (v && v.__msb_id === id) {\n                res = v;\n            }\n        });\n        return res;\n    }\n\n    /**\n     *\n     * 是否开启编组\n     * @param {boolean} enable\n     * @memberof Board\n     */\n    enableSelection(enable) {\n        this.fCanvas.selection = !!enable;\n    }\n\n    /**\n     * 添加绘制对象\n     *\n     * @param {fabric.Object} object\n     * @returns\n     * @memberof Board\n     */\n    addObject(object) {\n        if (!object) {\n            return;\n        }\n        const idx = this.findIndexById(object.__msb_id);\n        // object.setCoords(false, true);\n        if (idx < 0) {\n            this.fCanvas.add(object);\n        } else {\n            // replace\n            this.fCanvas.insertAt(object, idx, true);\n        }\n        // fix image remove bug\n        this.fCanvas.renderAll();\n    }\n\n    /**\n     * 获取当前矩阵\n     *\n     * @returns Array\n     * @memberof Board\n     */\n    getMatrix() {\n        const matrix = this.fCanvas.viewportTransform;\n        return fabric.util.qrDecompose(matrix);\n    }\n\n    // TODO: __msb_id 需要提出来 不应该放在框架里面\n    removeById(object) {\n        const idx = this.findIndexById(object.__msb_id);\n        if (idx < 0) {\n            return;\n        }\n        this.fCanvas.remove(this.fCanvas.item(idx));\n    }\n\n    // TODO: 演示使用\n    addCircle() {\n        const circle = new fabric.Circle({\n            radius: 20,\n            fill: 'green',\n            left: 100,\n            top: 100,\n        });\n        this.fCanvas.add(circle);\n        this.fCanvas.renderAll();\n    }\n\n    // TODO: 演示使用\n    addRect() {\n        const rect = new fabric.Rect({\n            width: 100,\n            height: 100,\n            left: 300,\n            top: 200,\n            fill: 'purple',\n        });\n\n        // rect.set('angle', 45);\n        rect.animate('left', '+=100', { onChange: this.fCanvas.renderAll.bind(this.fCanvas) });\n        rect.animate('angle', 145, {\n            duration: 1000,\n            easing: fabric.util.ease.easeOutBounce,\n            onChange: this.fCanvas.renderAll.bind(this.fCanvas),\n            // requestAnimationFrame(() => {\n            // this.fCanvas.renderAll.bind(this.fCanvas);\n            // });\n            // },\n        });\n\n        this.fCanvas.add(rect);\n    }\n\n    // 添加一个SVG 对象\n    addImageFromSvg(options) {\n        if (!options.svgEle) {\n            return null;\n        }\n        const callback = options.callback || (() => {});\n        return fabric.Image.fromElement(options.svgEle, options.opt, callback);\n    }\n\n    /**\n     * 添加图片对象\n     *\n     * @param {*} options\n     * @returns\n     * @memberof Board\n     */\n    addImage(options) {\n        const opts = {\n            filters: [\n                {\n                    name: 'BaseFilter',\n                    params: {},\n                },\n            ],\n            crossOrigin: 'anonymous',\n            onCreate: () => {},\n            opt: {},\n            ...options,\n        };\n        if (!opts.url) {\n            return null;\n        }\n        return fabric.Image.fromURL(\n            opts.url,\n            img => {\n                if (opts.onCreate(img, this.fCanvas) === false) {\n                    return;\n                }\n                opts.filters.forEach(v => {\n                    // 默认配置\n                    const val = {\n                        noise: 300,\n                        blur: 0.1,\n                        brightness: 0.05,\n                        contrast: 40,\n                        rotation: -0.5,\n                        blocksize: 8,\n                        threshold: 0.2,\n                        saturation: 100,\n                        ...v.params,\n                    };\n                    if (typeof(img.filters) !== \"undefined\" ) {\n                        img.filters.push(new fabric.Image.filters[v.name](val));\n                    }\n                });\n                img.applyFilters();\n                this.fCanvas.add(img);\n            },\n            {\n                ...opts.opt,\n                crossOrigin: opts.crossOrigin,\n            },\n        );\n    }\n\n    /**\n     * 获取当前画板所有对象\n     *\n     * @param {string} type 指定的类型 可以为空\n     * @returns {Array}\n     * @memberof Board\n     */\n    getAllObjects(type) {\n        return this.fCanvas.getObjects(type);\n    }\n\n    /**\n     * 根据传入的type类型，生成绘制实例\n     *\n     * @param {Object} conf\n     * @returns\n     * @memberof Board\n     */\n    getDrawInstance(conf) {\n        if (!conf || !conf.type || !conf.data) {\n            return null;\n        }\n        const klassName = getFabricClass(conf.type);\n        if (!klassName) {\n            return null;\n        }\n        return new Promise(reslove => {\n            // const newPath = null;\n            const newConf = {\n                ...conf,\n            };\n            // if (newConf.data) {\n            //     const newPos = fabric.util.transformPoint(\n            //         new fabric.Point(newConf.data.left, newConf.data.top),\n            //         this.fCanvas.viewportTransform,\n            //     );\n            //     instance.top = newP.y;\n            //     instance.left = newP.x;\n            //     newConf.data.top = newPos.y;\n            //     newConf.data.left = newPos.x;\n            //     eslint-disable-next-line prefer-destructuring\n            //     newConf.data.scaleX = this.fCanvas.viewportTransform[0];\n            //     eslint-disable-next-line prefer-destructuring\n            //     newConf.data.scaleY = this.fCanvas.viewportTransform[0];\n            // }\n            fabric[klassName].fromObject(newConf.data, instance => {\n                reslove(instance);\n            });\n        });\n    }\n\n    /**\n     * 从当前对象获取，fabric 实例\n     *\n     * @param {*} obj\n     * @memberof Board\n     */\n    getInstancFromObject(obj) {\n        return new Promise((resolve, reject) => {\n            if (!obj || !obj.type) {\n                reject(new Error('obj 不是有效的参数'));\n            }\n            const kls = obj.type[0].toUpperCase() + obj.type.substr(1);\n            if (fabric[kls] && fabric[kls].fromObject) {\n                fabric[kls].fromObject(obj, instance => {\n                    resolve(instance);\n                });\n            } else {\n                resolve(null);\n            }\n        });\n    }\n\n    loadFromJSON(json) {\n        this.fCanvas.loadFromDatalessJSON(json[0], this.fCanvas.renderAll.bind(this.fCanvas));\n    }\n\n    setZoom(zoom) {\n        if (typeof zoom !== 'number') {\n            return;\n        }\n        this.fCanvas.setZoom(zoom);\n    }\n\n    resetBoard() {\n        this.fCanvas.clear();\n    }\n\n    cleanBoard() {\n        this.fCanvas.clearContext();\n    }\n\n    setFreeDrawMode(mode) {\n        if (mode) {\n            this.mouseDraw.freeDrawControll.startDraw();\n        } else {\n            this.mouseDraw.freeDrawControll.endDraw();\n        }\n    }\n\n    setFreeDrawColor(color) {\n        this.mouseDraw.freeDrawControll.setPenColor(color);\n    }\n\n    setFreeDrawWidth(width) {\n        this.mouseDraw.freeDrawControll.setPenWidth(width);\n    }\n\n    getFreeDrawColor() {\n        return this.mouseDraw.freeDrawControll.getPenColor();\n    }\n\n    getFreeDrawWidth() {\n        return this.mouseDraw.freeDrawControll.getPenWidth();\n    }\n\n    // 设置绘画类型\n    setDrawType(type) {\n        if (!checkDrawType(type)) {\n            return;\n        }\n        this.drawType = type;\n        this.mouseDraw.updateDrawType(type);\n    }\n\n    destory() {\n        this.collections = [];\n        // this._dexporseEvent();\n        this.fCanvas.dispose();\n    }\n}\n\n// Board.DRAW_TYPE = DRAW_TYPE;\n// Board.util = util;\n\nexport { DRAW_TYPE };\n\nexport default Board;\n"],"names":["util.isNumber","DrawContoll","util.formatPos","DRAW_TYPE","util.getUId"],"mappings":"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"}